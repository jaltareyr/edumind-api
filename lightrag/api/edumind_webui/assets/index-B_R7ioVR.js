import{a4 as me,d as ge,g as N,a5 as Xt,a6 as z,a7 as v,a8 as o,x as r,a9 as K,y as m,aa as $,Z as M,a2 as _,F as Z,ab as oe,u as y,n as bt,ac as ne,w as te,h as Y,R as Ne,V as Kt,U as Jt,ad as tt,D as Yt,H as ce,ae as $e,A as Ge,B as qe,K as Zt,af as Es,J as $s,L as Ds,ag as Ns,ah as Fs,ai as Os}from"./vendor-RFFrMlth.js";import{u as _t,a as wt,c as Ls,b as Ms}from"./vue-core-BmKbcQda.js";import{D as Je,M as Ps,a as Us,S as qs,N as zs,b as Gs,d as Ws,E as Qs,e as Rs,l as js,F as Bs}from"./graph-vendor-BH_EP0em.js";import{V as Hs,a as be,b as q,c as rt,d as Xs,e as Ks,f as Qe,g as Be,h as fe,i as st,j as de,k as re,l as Re,m as es,n as Ve,o as ie,p as We,q as ue,r as De,s as xe,t as _e,u as je,v as Ae,w as ye,x as Nt,y as Js,z as ve,A as Ee,B as ts,C as ss,D as Ys,E as Zs,F as ea,G as ta,H as as,I as Ye,J as rs,K as Ze,L as sa,M as aa,N as ra,O as ia,P as Ft,Q as oa,R as na,S as Ot,T as la,U as da,W as ca}from"./vuetify-vendor-BV8uRrN8.js";import{P as Lt}from"./prism-vendor-C94FbFSK.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))a(i);new MutationObserver(i=>{for(const n of i)if(n.type==="childList")for(const l of n.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&a(l)}).observe(document,{childList:!0,subtree:!0});function s(i){const n={};return i.integrity&&(n.integrity=i.integrity),i.referrerPolicy&&(n.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?n.credentials="include":i.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function a(i){if(i.ep)return;i.ep=!0;const n=s(i);fetch(i.href,n)}})();const Le=me("app",{state:()=>({appName:"EduMind Question Studio",tagline:"Craft rich assessments with adaptive AI support.",organization:"EduMind",themePreference:"light",maxCanvasTabs:5}),getters:{organizationInitials:e=>e.organization.split(" ").map(t=>t.charAt(0)).join("").toUpperCase()},actions:{toggleThemePreference(){this.themePreference=this.themePreference==="light"?"dark":"light"}}}),is="http://localhost:9621".replace(/\/+$/,""),ua="b3b92c76-12c7-4b9d-9778-a90833e52e2d",Mt="default",kt="edumind_access_token",pa="edumind_auth_mode";function os(e){sessionStorage.setItem(kt,e)}function He(){return sessionStorage.getItem(kt)||""}function fa(){sessionStorage.removeItem(kt)}function at(e){sessionStorage.setItem(pa,e)}function St(e){try{const[,t]=e.split("."),s=JSON.parse(atob(t.replace(/-/g,"+").replace(/_/g,"/")));return s!=null?s:null}catch{return null}}function ns(e,t=15){const s=St(e);return s!=null&&s.exp?Math.floor(Date.now()/1e3)>=s.exp-t:!1}function ma(e){const t=new Headers(e),s=He();return s&&t.set("Authorization",`Bearer ${s}`),t.set("X-API-Key",ua),!t.has("X-Workspace")&&Mt&&t.set("X-Workspace",Mt),t}async function ha(){const e=await fetch(`${is}/auth-status`,{method:"GET"});if(!e.ok)throw new Error(`auth-status failed: ${e.status}`);return e.json()}function vt(){var i;const e=He();if(!e||ns(e))return null;const t=St(e);return!t||!t.sub?null:{id:(t.metadata||{}).user_id,username:t.sub,full_name:t.sub,role:(i=t.role)!=null?i:"user",exp:typeof t.exp=="number"?t.exp:void 0}}async function ga(){const e=He();if(e&&!ns(e)){const s=vt();if(s)return{user:s}}const t=await ha();return(t==null?void 0:t.auth_configured)===!1&&(t!=null&&t.access_token)?(os(t.access_token),at("disabled"),{user:vt()}):(at("enabled"),{user:null})}async function ya({username:e,password:t}){var l;const s=new URLSearchParams({grant_type:"password",username:e,password:t,scope:"",client_id:"",client_secret:""}),a=await fetch(`${is}/login`,{method:"POST",headers:ma({"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json"}),body:s});if(!a.ok)throw a.status===401?new Error("Incorrect credentials"):new Error(`Login failed: ${a.status}`);const i=await a.json();if(!(i!=null&&i.access_token))throw new Error("No access_token in response");return os(i.access_token),at((l=i.auth_mode)!=null?l:"enabled"),{user:vt()}}async function ls(){fa(),at("enabled")}const va=1e5,xt=()=>{const e="http://localhost:9621";return e.endsWith("/")?e.slice(0,-1):e},ba=(e,t)=>{if(!t)return e;const s=typeof e=="string"?new URL(e,window.location.origin):new URL(e.toString());return Object.entries(t).forEach(([a,i])=>{i==null||i===""||(Array.isArray(i)?i.forEach(n=>s.searchParams.append(a,n)):typeof i=="object"?s.searchParams.append(a,JSON.stringify(i)):s.searchParams.append(a,i))}),s},_a=async e=>{if((e.headers.get("content-type")||"").includes("application/json")){const a=await e.json();if(!e.ok){const i=new Error((a==null?void 0:a.message)||e.statusText);throw i.status=e.status,i.payload=a,i}return a}const s=await e.text();if(!e.ok){const a=new Error(s||e.statusText);throw a.status=e.status,a.payload=s,a}return s},wa="edumind_access_token",ds=()=>sessionStorage.getItem(wa)||"";function Pt(){const e=He();if(!e)return null;const t=St(e);return t?t.metadata&&t.metadata.user_id?t.metadata.user_id:"not found":null}const ae=async(e,t={})=>{var H,L,u,p,h;const{method:s="GET",baseUrl:a=xt(),query:i,headers:n,body:l,timeout:d=va,signal:c,auth:f={}}=t,g=new AbortController,k=setTimeout(()=>g.abort(),d);c&&(c.aborted?g.abort(c.reason):c.addEventListener("abort",()=>g.abort(c.reason),{once:!0}));const x=((H=f.userId)!=null?H:Pt())||null,T={...i||{},...(i==null?void 0:i.user_id)===void 0&&x?{user_id:x}:{}},w=ba(`${a}${e}`,T),I=typeof FormData!="undefined"&&l instanceof FormData,O=typeof URLSearchParams!="undefined"&&l instanceof URLSearchParams,F=new Headers({Accept:"application/json",...n});I||(O?F.has("Content-Type")||F.set("Content-Type","application/x-www-form-urlencoded"):l!==void 0&&!F.has("Content-Type")&&F.set("Content-Type","application/json"));const S=(L=f.token)!=null?L:ds();S&&F.set("Authorization",`Bearer ${S}`),((u=f.apiKey)==null||u)&&F.set("X-API-Key",(p=f.apiKey)!=null?p:"b3b92c76-12c7-4b9d-9778-a90833e52e2d");const E=(h=f.workspace)!=null?h:void 0;E&&F.set("X-Workspace",E),Pt(),f.userId&&F.set("X-User-ID",f.userId);const G={method:s,headers:F,body:I||O?l:l!==void 0?JSON.stringify(l):void 0,signal:g.signal};try{const C=await fetch(w.toString(),G);return clearTimeout(k),await _a(C)}catch(C){if(clearTimeout(k),C.name==="AbortError"){const D=new Error("Request timed out or was aborted");throw D.aborted=!0,D}throw C}},Me=(e={})=>Object.fromEntries(Object.entries(e).filter(([,t])=>t!=null)),At="/documents",Ct=e=>Me(e),ka=({file:e,metadata:t={},query:s,headers:a}={})=>{if(!e)throw new Error("uploadDocument requires a file parameter");const i=new FormData;return i.append("file",e),Object.entries(t).forEach(([n,l])=>{l!=null&&i.append(n,l)}),ae(`${At}/upload`,{method:"POST",query:Ct(s),headers:a,body:i})},Sa=({payload:e,query:t,headers:s}={})=>{if(!e)throw new Error("insertLinks requires a payload parameter");return ae(`${At}/links`,{method:"POST",query:Ct(t),headers:s,body:e})},xa=({payload:e,query:t,headers:s}={})=>{if(!e)throw new Error("getPaginatedDocuments requires a payload parameter");return ae(`${At}/paginated`,{method:"POST",query:Ct(t),headers:s,body:e})},It="/questions",cs=e=>Me(e),us=({query:e,headers:t}={})=>ae(`${It}/`,{method:"GET",query:cs(e),headers:t}),Aa=({id:e,query:t,headers:s}={})=>{if(!e)throw new Error("deleteQuestion requires an id parameter");return ae(`${It}/${encodeURIComponent(e)}`,{method:"DELETE",query:cs(t),headers:s})},Ca=async({payload:e,headers:t}={})=>{if(!e)throw new Error("exportQuestions requires a payload parameter");const s=xt(),a=He(),i=new Headers(t);return i.set("Content-Type","application/json"),a&&i.set("Authorization",`Bearer ${a}`),await fetch(`${s}${It}/export`,{method:"POST",headers:i,body:JSON.stringify(e),responseType:"blob"})},ps="/ai",fs=e=>Me(e),Ia=({payload:e,query:t,headers:s}={})=>{if(!e)throw new Error("generateQuestions requires a payload parameter");return ae(`${ps}/questions/generate`,{method:"POST",query:fs(t),headers:s,body:e})},Ta=({questionId:e,payload:t,query:s,headers:a}={})=>{if(!e)throw new Error("generateQuestionVariants requires a questionId parameter");if(!t)throw new Error("generateQuestionVariants requires a payload parameter");return ae(`${ps}/questions/${encodeURIComponent(e)}/variants`,{method:"POST",query:fs(s),headers:a,body:t})},it="/sessions",ot=e=>Me(e),ms=(e={})=>({id:e.id,name:e.topic||"Untitled Canvas",topic:e.topic||"Untitled Canvas",userId:e.user_id,projectId:e.project_id,memoryState:Array.isArray(e.memory_state)?e.memory_state:[],createdAt:e.created_at,lastActiveAt:e.last_active_at}),Va=({payload:e,query:t,headers:s}={})=>{if(!e)throw new Error("createSession requires a payload parameter");return ae(it,{method:"POST",query:ot(t),headers:s,body:e})},hs=({query:e,headers:t}={})=>ae(it,{method:"GET",query:ot(e),headers:t}),Ea=({id:e,query:t,headers:s}={})=>{if(!e)throw new Error("getSession requires an id parameter");return ae(`${it}/${encodeURIComponent(e)}`,{method:"GET",query:ot(t),headers:s})},$a=({id:e,query:t,headers:s}={})=>{if(!e)throw new Error("deleteSession requires an id parameter");return ae(`${it}/${encodeURIComponent(e)}`,{method:"DELETE",query:ot(t),headers:s})},Da=async({projectId:e,userId:t,limit:s=5,query:a={},headers:i}={})=>{var d,c;const n=await hs({query:{...a,project_id:e!=null?e:a.project_id,user_id:t!=null?t:a.user_id,limit:(d=a.limit)!=null?d:s,sort:(c=a.sort)!=null?c:"-created_at"},headers:i}),l=Array.isArray(n==null?void 0:n.sessions)?n.sessions:[];return{...n,canvases:l.map(f=>ms(f))}},Na=async({id:e,query:t,headers:s}={})=>{if(!e)throw new Error("fetchCanvas requires an id parameter");const a=await Ea({id:e,query:t,headers:s}),i=a!=null&&a.session?ms(a.session):null;return{...a,canvas:i}},nt="/workspaces",lt=e=>Me(e),Fa=({payload:e,query:t,headers:s}={})=>{if(!e)throw new Error("createWorkspace requires a payload parameter");return ae(nt,{method:"POST",query:lt(t),headers:s,body:e})},Oa=({query:e,headers:t}={})=>ae(nt,{method:"GET",query:lt(e),headers:t}),La=({id:e,payload:t,query:s,headers:a}={})=>{if(!e)throw new Error("updateWorkspace requires an id parameter");if(!t)throw new Error("updateWorkspace requires a payload parameter");return ae(`${nt}/${encodeURIComponent(e)}`,{method:"PATCH",query:lt(s),headers:a,body:t})},Ma=({id:e,query:t,headers:s}={})=>{if(!e)throw new Error("deleteWorkspace requires an id parameter");return ae(`${nt}/${encodeURIComponent(e)}`,{method:"DELETE",query:lt(t),headers:s})},Pa=new TextDecoder,Ua=async({payload:e,headers:t={},query:s,signal:a,onChunk:i})=>{const n=xt(),l=new URL(`${n}/query/stream`,window.location.origin);s&&Object.entries(s).forEach(([w,I])=>{I!=null&&I!==""&&l.searchParams.append(w,I)});const d=new AbortController;[a,d.signal].filter(Boolean);const c=w=>d.abort(w);a&&(a.aborted?d.abort(a.reason):a.addEventListener("abort",()=>c(a.reason),{once:!0}));const f=await fetch(l.toString(),{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${ds()}`,...t},body:JSON.stringify(e),signal:d.signal});if(!f.ok){const w=await f.text(),I=new Error(w||f.statusText);throw I.status=f.status,I}if(!f.body||typeof f.body.getReader!="function"){const w=await f.text();typeof i=="function"&&i(w);return}const g=f.body.getReader();let k="";const x=w=>{var F,S,E,G,H,L,u,p;if(!w||w==="[DONE]"||w==="data: [DONE]")return;let I=w;if(I.startsWith("data:")&&(I=I.slice(5).trim(),!I))return;let O="";try{const h=JSON.parse(I);O=(p=(u=(E=(S=(F=h==null?void 0:h.response)!=null?F:h==null?void 0:h.delta)!=null?S:h==null?void 0:h.content)!=null?E:h==null?void 0:h.text)!=null?u:(L=(H=(G=h==null?void 0:h.choices)==null?void 0:G[0])==null?void 0:H.delta)==null?void 0:L.content)!=null?p:"",Array.isArray(O)&&(O=O.join(" "))}catch{O=I}typeof O=="string"&&O&&typeof i=="function"&&i(O)},T=()=>{let w;for(;(w=k.indexOf(`
`))!==-1;){const I=k.slice(0,w).trim();k=k.slice(w+1),x(I)}};try{for(;;){const{value:w,done:I}=await g.read();if(I)break;w&&(k+=Pa.decode(w,{stream:!0}),T())}k=k.trim(),k&&(x(k),k="")}finally{g.releaseLock()}},qa="/graph",gs=e=>Me(e),za=({query:e,headers:t}={})=>ae("/graphs",{method:"GET",query:gs(e),headers:t}),Ga=({query:e,headers:t}={})=>ae(`${qa}/label/list`,{method:"GET",query:gs(e),headers:t}),Ut=()=>({searchQuery:"",type:"all",difficulty:"all",tag:"all",workspaceId:"all",sessionId:"all",approved:"all",archived:"false",hasVariants:"all"}),qt=e=>!e||e==="all"?{}:{"X-Workspace":e},Wa=(e=[])=>Array.isArray(e)?e.map(t=>{if(!t)return null;const s=Array.isArray(t.options)?t.options.map(n=>String(n)):[],a=t.correct_answers||t.correctIndexes||t.correct_indexes,i=Array.isArray(a)?a.map(n=>Number(n)).filter(n=>!Number.isNaN(n)):[];return{id:t.id||null,difficulty_level:t.difficulty_level||t.difficultyLevel||null,options:s,correct_answers:i,rationale:t.rationale||t.ai_rational||""}}).filter(t=>t!==null):[],Qa=e=>{if(!e||typeof e!="object")return null;const t=Array.isArray(e.tags)?e.tags.map(s=>String(s)):typeof e.tag=="string"?[e.tag]:[];return{id:e.id,type:e.type||"mcq",question:e.question_text||"",options:Array.isArray(e.options)?e.options.map(s=>String(s)):[],correct_options:Array.isArray(e.correct_answers)?e.correct_answers.map(s=>Number(s)):[],difficulty_level:e.difficulty_level||"medium",ai_rational:e.ai_rational||e.rationale||"AI generated question.",source:e.source||"AI Generator",type:e.type||"mcq",tag:t.length?t[0]:"Untagged",tags:t,isApproved:!!e.isApproved,isArchived:!!e.isArchived,project_id:e.project_id||"",session_id:e.session_id||"",created_at:e.created_at||"",updated_at:e.updated_at||"",variants:Wa(e.variants)}},Ra=me("questions",{state:()=>({questions:[],totalQuestions:0,page:1,pageSize:20,loading:!1,error:null,filters:Ut(),sessionsByWorkspace:{},sessionsLoading:!1,exportDialogOpen:!1,exportFormat:"csv",exportFileName:"questions_export",exporting:!1}),getters:{uniqueTags(e){const t=new Set;return e.questions.forEach(s=>{Array.isArray(s.tags)&&s.tags.length?s.tags.forEach(a=>t.add(a)):s.tag&&t.add(s.tag)}),Array.from(t).sort((s,a)=>s.localeCompare(a))},filteredQuestions(e){const t=e.filters.searchQuery.trim().toLowerCase();return e.questions.filter(s=>{var T;const a=!t||s.question.toLowerCase().includes(t),i=e.filters.type==="all"||s.type===e.filters.type,n=e.filters.difficulty==="all"||s.difficulty_level===e.filters.difficulty,l=e.filters.tag==="all"||s.tag===e.filters.tag||((T=s.tags)==null?void 0:T.includes(e.filters.tag)),d=e.filters.workspaceId==="all"||s.project_id===e.filters.workspaceId,c=e.filters.sessionId==="all"||s.session_id===e.filters.sessionId,f=e.filters.approved==="all"||s.isApproved===(e.filters.approved==="true"),g=e.filters.archived==="all"||s.isArchived===(e.filters.archived==="true"),k=Array.isArray(s.variants)?s.variants.length:0,x=e.filters.hasVariants==="all"||(e.filters.hasVariants==="true"?k>0:k===0);return a&&i&&n&&l&&d&&c&&f&&g&&x})},pageCount(e){return e.totalQuestions?Math.max(1,Math.ceil(e.totalQuestions/e.pageSize)):1},resultsSummary(){const e=this.filteredQuestions.length;if(e===0)return"No questions match the current filters.";const t=(this.page-1)*this.pageSize+1,s=t+e-1;return this.totalQuestions?`Showing ${t}-${s} of ${this.totalQuestions} questions (filtered view).`:e===1?"1 question matches the current filters.":`${e} questions match the current filters.`},sessionsForWorkspace(e){return t=>e.sessionsByWorkspace[t]||[]}},actions:{resetFilters(){this.filters=Ut(),this.page=1},setSearchQuery(e){this.filters.searchQuery=e,this.page=1},setFilterType(e){this.filters.type=e,this.page=1},setFilterDifficulty(e){this.filters.difficulty=e,this.page=1},setFilterTag(e){this.filters.tag=e,this.page=1},setFilterWorkspace(e){this.filters.workspaceId=e||"all",e==="all"&&(this.filters.sessionId="all"),this.page=1},setFilterSession(e){this.filters.sessionId=e||"all",this.page=1},setFilterApproved(e){this.filters.approved=e||"all",this.page=1},setFilterArchived(e){this.filters.archived=e||"all",this.page=1},setFilterHasVariants(e){this.filters.hasVariants=e||"all",this.page=1},setFilterHasVariants(e){this.filters.hasVariants=e||"all",this.page=1},normaliseQuestions(e){return(Array.isArray(e)?e:[]).map(s=>Qa(s)).filter(s=>s!==null)},setPage(e){const t=Number(e);if(!Number.isFinite(t))return;const s=Math.max(1,Math.floor(t));s!==this.page&&(this.page=s)},setPageSize(e){const t=Number(e);[20,40,60,80,100].includes(t)&&t!==this.pageSize&&(this.pageSize=t,this.page=1)},async fetchQuestions(){const{searchQuery:e,workspaceId:t,sessionId:s,approved:a,archived:i,type:n,hasVariants:l}=this.filters,d={page:this.page,pageSize:this.pageSize,sort:"updated_at",order:"desc",q:e||void 0,project_id:t!=="all"?t:void 0,session_id:s!=="all"?s:void 0,isApproved:a==="all"?void 0:a==="true",isArchived:i==="all"?void 0:i==="true",type:n!=="all"?n:void 0,hasVariants:l==="all"?void 0:l==="true"};this.loading=!0,this.error=null;try{const c=await us({query:d,headers:qt(t!=="all"?t:void 0)}),f=this.normaliseQuestions(c==null?void 0:c.questions);this.questions=f;const g=Number(c==null?void 0:c.total)||f.length;this.totalQuestions=g,c!=null&&c.page&&(this.page=c.page),c!=null&&c.pageSize&&(this.pageSize=c.pageSize)}catch(c){console.error("Failed to load questions",c),this.error=c,this.questions=[],this.totalQuestions=0}finally{this.loading=!1}},async fetchSessionsForWorkspace(e){const t=e||"all";if(t==="all")return[];if(Array.isArray(this.sessionsByWorkspace[t])&&this.sessionsByWorkspace[t].length>0)return this.sessionsByWorkspace[t];this.sessionsLoading=!0;try{const s=await hs({query:{project_id:t,limit:100,sort:"-created_at"},headers:qt(t)}),a=Array.isArray(s==null?void 0:s.sessions)?s.sessions.map(i=>({id:i.id,name:i.topic||"Untitled Canvas",project_id:i.project_id})):[];return this.sessionsByWorkspace={...this.sessionsByWorkspace,[t]:a},this.filters.sessionId!=="all"&&(a.some(n=>n.id===this.filters.sessionId)||(this.filters.sessionId="all")),a}catch(s){return console.error("Failed to load sessions for workspace",s),this.error=s,this.sessionsByWorkspace={...this.sessionsByWorkspace,[t]:[]},[]}finally{this.sessionsLoading=!1}},openExportDialog(){this.exportDialogOpen=!0},closeExportDialog(){this.exportDialogOpen=!1},setExportFormat(e){this.exportFormat=e;const t=e==="qti"?"zip":"csv";this.exportFileName=`questions_export.${t}`},async exportQuestions(){var e;try{const t=this.filteredQuestions;this.exporting=!0;const s={filename:this.exportFileName.replace(/\.(csv|zip)$/i,""),fileformat:this.exportFormat,questions:t.map(c=>({question:c.question+(c.source?` (Source: ${c.source})`:""),options:c.options,correct_options:c.correct_options}))},a=await Ca({payload:s}),i=await a.blob(),n=a.headers.get("Content-Disposition"),l=((e=n==null?void 0:n.split("filename=")[1])==null?void 0:e.replace(/["']/g,""))||`${this.exportFileName}.${this.exportFormat}`,d=document.createElement("a");d.href=URL.createObjectURL(i),d.download=l,document.body.appendChild(d),d.click(),document.body.removeChild(d),URL.revokeObjectURL(d.href)}catch(t){console.error("Export failed",t)}finally{this.exporting=!1,this.exportDialogOpen=!1}}}}),pe=me("user",{state:()=>({id:null,user:null,loading:!1,error:null,hydrated:!1}),getters:{isAuthenticated:e=>!!e.user,userId:e=>{var t;return((t=e.user)==null?void 0:t.id)||""},displayName:e=>{var t,s;return((t=e.user)==null?void 0:t.full_name)||((s=e.user)==null?void 0:s.username)||""},role:e=>{var t;return((t=e.user)==null?void 0:t.role)||"guest"}},actions:{async hydrate(){if(!(this.hydrated||this.loading)){this.loading=!0;try{const{user:e}=await ga();this.user=e,this.error=null}catch(e){this.user=null,this.error=e}finally{this.hydrated=!0,this.loading=!1}}},async signIn({username:e,password:t}){this.loading=!0,this.error=null;try{const{user:s}=await ya({username:e,password:t});return this.user=s,this.hydrated=!0,this.user}catch(s){throw this.user=null,this.error=s,s}finally{this.loading=!1}},async signOut(){try{await ls()}finally{this.user=null,this.hydrated=!0,this.error=null}},clearAuth(){this.isAuthenticated=!1,this.user=null,this.token=null,localStorage.removeItem("auth_token")}}}),Tt=me("dashboard",{state:()=>({workspaces:[],loading:!1,error:null,hydrated:!1}),getters:{hasWorkspaces:e=>e.workspaces.length>0,primaryWorkspaceName:e=>{var t;return(t=e.workspaces[0])!=null&&t.name?e.workspaces[0].name:"Workspace"}},actions:{async initialise(e={}){if(this.loading||this.hydrated&&!e.force)return;const s=pe().userId;this.loading=!0,this.error=null;try{const a=await Oa({query:{user_id:s,limit:30,sort:"-created_at"}}),i=(a==null?void 0:a.projects)||(a==null?void 0:a.workspaces)||[];this.workspaces=i.map(n=>({id:n.id,name:n.name||"Untitled workspace",createdAt:n.created_at,instructions:n.instructions||"No instructions provided."})),this.hydrated=!0}catch(a){console.error("Failed to load workspaces",a),this.error=a}finally{this.loading=!1}},async createWorkspace({name:e,instructions:t}={}){const s=typeof e=="string"?e.trim():"";if(!s)throw new Error("Workspace name is required.");const a={name:s,user_id:pe().userId};t&&t.trim()&&(a.instructions=t.trim());try{const i=await Fa({payload:a}),n=(i==null?void 0:i.project)||(i==null?void 0:i.workspace)||i,l=n==null?void 0:n.id;if(await this.initialise({force:!0}),l){const d=this.workspaces.find(c=>c.id===l);return d||{id:l,name:(n==null?void 0:n.name)||s,createdAt:(n==null?void 0:n.created_at)||new Date().toISOString(),instructions:(n==null?void 0:n.instructions)||a.instructions||"No instructions provided."}}return null}catch(i){throw console.error("Failed to create workspace",i),i}},async updateWorkspace({id:e,name:t,instructions:s}={}){const a=typeof e=="string"?e.trim():"";if(!a)throw new Error("Workspace id is required.");const i={};if(typeof t=="string"&&t.trim()&&(i.name=t.trim()),s!==void 0&&(i.instructions=(s==null?void 0:s.trim())||""),Object.keys(i).length===0)throw new Error("No updates provided.");try{return await La({id:a,payload:i}),await this.initialise({force:!0}),this.workspaces.find(n=>n.id===a)||null}catch(n){throw console.error("Failed to update workspace",n),n}},async deleteWorkspace({id:e}={}){const t=typeof e=="string"?e.trim():"";if(!t)throw new Error("Workspace id is required.");try{await Ma({id:t}),await this.initialise({force:!0})}catch(s){throw console.error("Failed to delete workspace",s),s}}}}),ee=me("workspaceContext",{state:()=>({workspaceId:"",workspaceName:""}),getters:{hasWorkspace:e=>!!e.workspaceId},actions:{setWorkspace({id:e,name:t}){e&&(this.workspaceId=e),t!==void 0&&(this.workspaceName=t)},resetWorkspace(){this.workspaceId="",this.workspaceName=""}}}),ft=()=>[""],ja=me("documents",{state:()=>({documents:[],loading:!1,error:null,menuOpen:!1,uploadDialogOpen:!1,linksDialogOpen:!1,uploadFiles:[],uploadInProgress:!1,linkEntries:ft(),linkSubmissionInProgress:!1}),getters:{hasDocuments:e=>e.documents.length>0,canSubmitLinks:e=>e.linkEntries.some(t=>t&&t.trim().length>0),canSubmitFiles:e=>e.uploadFiles.length>0},actions:{toggleMenu(e){this.menuOpen=typeof e=="boolean"?e:!this.menuOpen},openUploadDialog(){this.uploadFiles=[],this.uploadDialogOpen=!0,this.toggleMenu(!1)},closeUploadDialog(){this.uploadDialogOpen=!1,this.uploadFiles=[]},openLinksDialog(){this.linkEntries=ft(),this.linksDialogOpen=!0,this.toggleMenu(!1)},closeLinksDialog(){this.linksDialogOpen=!1,this.linkEntries=ft(),this.linkSubmissionInProgress=!1},addLinkField(){this.linkEntries=[...this.linkEntries,""]},removeLinkField(e){if(this.linkEntries.length===1){this.linkEntries=[""];return}this.linkEntries=this.linkEntries.filter((t,s)=>s!==e)},updateLinkField(e,t){this.linkEntries=this.linkEntries.map((s,a)=>a===e?t:s)},setUploadFiles(e){if(!e){this.uploadFiles=[];return}Array.isArray(e)?this.uploadFiles=e:e instanceof FileList?this.uploadFiles=Array.from(e):this.uploadFiles=[]},async fetchDocuments(){const e=ee();if(!e.hasWorkspace){this.documents=[];return}this.loading=!0,this.error=null;try{const t=await xa({payload:{page:1,page_size:50,sort_field:"updated_at",sort_direction:"desc"},headers:{"X-Workspace":e.workspaceId}}),s=(t==null?void 0:t.documents)||[];this.documents=s.map(a=>({id:a.id,name:a.file_path||a.id,status:a.status,createdAt:a.created_at,updatedAt:a.updated_at,summary:a.content_summary}))}catch(t){console.error("Failed to fetch documents",t),this.error=t}finally{this.loading=!1}},async uploadSelectedFiles(){if(!this.canSubmitFiles||this.uploadInProgress)return;const e=ee();if(e.hasWorkspace){this.uploadInProgress=!0;try{const t=this.uploadFiles.map(s=>ka({file:s,headers:{"X-Workspace":e.workspaceId}}));await Promise.all(t),this.closeUploadDialog(),await this.fetchDocuments()}catch(t){console.error("File upload failed",t),this.error=t}finally{this.uploadInProgress=!1}}},async submitLinks(){if(!this.canSubmitLinks||this.linkSubmissionInProgress)return;const e=ee();if(!e.hasWorkspace)return;const t=this.linkEntries.map(s=>s.trim()).filter(s=>s.length>0);if(t.length){this.linkSubmissionInProgress=!0;try{await Sa({payload:{links:t},headers:{"X-Workspace":e.workspaceId}}),this.closeLinksDialog(),await this.fetchDocuments()}catch(s){console.error("Link submission failed",s),this.error=s}finally{this.linkSubmissionInProgress=!1}}}}}),Ba="edumind_ai_chat_history",mt=typeof globalThis!="undefined"?globalThis.crypto:void 0,et=e=>typeof e=="string"&&e.trim()?e.trim():"default",ys=e=>`${Ba}:${et(e)}`,vs=()=>mt&&typeof mt.randomUUID=="function"?mt.randomUUID():`msg-${Date.now()}-${Math.random().toString(36).substring(2,9)}`,Ha=new Set(["user","assistant","system"]),Xa=e=>Ha.has(e)?e:"assistant",Ka=e=>({id:`error-${Date.now()}-${e}`,role:"system",content:"Error loading message",isError:!0}),Ja=(e,t)=>{try{if(!e||typeof e!="object")throw new Error("Invalid message payload");const s={id:typeof e.id=="string"&&e.id?e.id:vs(),role:Xa(e.role),content:typeof e.content=="string"?e.content:""};return e.isError===!0&&(s.isError=!0),s}catch(s){return console.error("Failed to restore chat message from storage",s),Ka(t)}},zt=e=>{if(typeof window=="undefined"||!window.localStorage)return{messages:[],dirty:!1};try{const t=window.localStorage.getItem(ys(e));if(!t)return{messages:[],dirty:!1};const s=JSON.parse(t);if(!Array.isArray(s))return{messages:[],dirty:!1};let a=!1;return{messages:s.map((n,l)=>{const d=Ja(n,l);if(!a){const c=n||{};a=d.id!==c.id||d.role!==c.role||d.content!==c.content||!!d.isError!=!!c.isError}return d}),dirty:a}}catch(t){return console.error("Failed to parse chat history from storage",t),{messages:[],dirty:!1}}},ht=(e,t)=>{if(!(typeof window=="undefined"||!window.localStorage))try{window.localStorage.setItem(ys(t),JSON.stringify(e))}catch(s){console.error("Failed to persist chat history",s)}},Gt=(e,t="")=>({id:vs(),role:e,content:t}),Ya=me("chat",{state:()=>{const e=pe(),t=et(e.userId),{messages:s,dirty:a}=zt(t);return a&&ht(s,t),{messages:s,historyUserId:t,inputValue:"",streaming:!1,error:null}},getters:{hasMessages:e=>e.messages.length>0,canSend:e=>e.inputValue.trim().length>0&&!e.streaming},actions:{setInput(e){this.inputValue=e},hydrateHistoryForCurrentUser(){const e=pe(),t=et(e.userId),{messages:s,dirty:a}=zt(t);this.messages=s,this.historyUserId=t,a&&ht(this.messages,t)},persistHistory(){const e=this.historyUserId||"default";ht(this.messages,e)},clearConversation(){this.messages=[],this.error=null,this.persistHistory()},async sendMessage(){if(!this.canSend)return;const e=ee(),t=pe();if(et(t.userId)!==this.historyUserId&&this.hydrateHistoryForCurrentUser(),!e.hasWorkspace){this.error=new Error("Select a workspace before chatting.");return}const a=this.inputValue.trim();this.inputValue="",this.error=null;const i=this.messages.filter(d=>(d.role==="user"||d.role==="assistant")&&d.isError!==!0).slice(-10).map(d=>({role:d.role,content:d.content})),n=Gt("user",a),l=Gt("assistant","");this.messages=[...this.messages,n,l],this.streaming=!0,this.persistHistory();try{await Ua({payload:{query:a,mode:"mix",response_type:"Multiple Paragraphs",...i.length?{conversation_history:i}:{}},headers:{"X-Workspace":e.workspaceId},onChunk:d=>{l.content+=d,this.messages=[...this.messages],this.persistHistory()}})}catch(d){console.error("Streaming query failed",d),this.error=d,l.content=(d==null?void 0:d.message)||"Something went wrong.",l.isError=!0,this.messages=[...this.messages]}finally{this.streaming=!1,this.persistHistory()}}}}),Za=me("workspaceToolkit",{state:()=>({activeTab:"files"}),actions:{setActiveTab(e){this.activeTab=e}}});class er{constructor(){this.nodes=[],this.edges=[],this.nodeIdMap={},this.edgeIdMap={},this.edgeDynamicIdMap={}}getNode(t){const s=this.nodeIdMap[t];return s!==void 0?this.nodes[s]:void 0}getEdge(t,s=!0){const a=s?this.edgeDynamicIdMap[t]:this.edgeIdMap[t];return a!==void 0?this.edges[a]:void 0}buildDynamicMap(){this.edgeDynamicIdMap={};for(let t=0;t<this.edges.length;t++){const s=this.edges[t];this.edgeDynamicIdMap[s.dynamicId]=t}}}const Vt=me("graph",{state:()=>({selectedNode:null,focusedNode:null,selectedEdge:null,focusedEdge:null,rawGraph:null,sigmaGraph:null,sigmaInstance:null,allDatabaseLabels:["*"],searchEngine:null,moveToSelectedNode:!1,isFetching:!1,graphIsEmpty:!1,lastSuccessfulQueryLabel:"",typeColorMap:new Map,graphDataFetchAttempted:!1,labelsFetchAttempted:!1,nodeToExpand:null,nodeToPrune:null,graphDataVersion:0}),getters:{hasGraph:e=>!!e.sigmaGraph&&e.sigmaGraph.order>0},actions:{setSigmaInstance(e){this.sigmaInstance=e},setSelectedNode(e,t=!1){this.selectedNode=e},setFocusedNode(e){this.focusedNode=e},setSelectedEdge(e){this.selectedEdge=e},setFocusedEdge(e){this.focusedEdge=e},setIsFetching(e){this.isFetching=!!e},setGraphIsEmpty(e){this.graphIsEmpty=!!e},setLastSuccessfulQueryLabel(e){this.lastSuccessfulQueryLabel=e||""},setRawGraph(e){this.rawGraph=e},setSigmaGraph(e){this.sigmaGraph=e||null},setAllDatabaseLabels(e){this.allDatabaseLabels=Array.isArray(e)?e:["*"]},setSearchEngine(e){this.searchEngine=e||null},resetSearchEngine(){this.searchEngine=null},setGraphDataFetchAttempted(e){this.graphDataFetchAttempted=!!e},setLabelsFetchAttempted(e){this.labelsFetchAttempted=!!e},setMoveToSelectedNode(e){this.moveToSelectedNode=!!e},setTypeColorMap(e){this.typeColorMap=e instanceof Map?e:new Map},clearSelection(){this.selectedNode=null,this.focusedNode=null,this.selectedEdge=null,this.focusedEdge=null},reset(){this.selectedNode=null,this.focusedNode=null,this.selectedEdge=null,this.focusedEdge=null,this.rawGraph=null,this.sigmaGraph=null,this.searchEngine=null,this.moveToSelectedNode=!1,this.graphIsEmpty=!1},incrementGraphDataVersion(){this.graphDataVersion=this.graphDataVersion+1},triggerNodeExpand(e){this.nodeToExpand=e},triggerNodePrune(e){this.nodeToPrune=e},async fetchAllDatabaseLabels(){try{const e={},s={"X-Workspace":ee().workspaceId},a=await Ga({query:e,headers:s});this.setAllDatabaseLabels(["*",...a||[]]),this.setLabelsFetchAttempted(!0)}catch(e){console.error("fetchAllDatabaseLabels failed:",e),this.setAllDatabaseLabels(["*"]),this.setLabelsFetchAttempted(!0)}},async fetchGraph(){this.setIsFetching(!0),this.setGraphDataFetchAttempted(!0);try{const e={label:"*",max_depth:6,max_nodes:1e3},s={"X-Workspace":ee().workspaceId},a=await za({query:e,headers:s}),{nodes:i,edges:n}=this._normalizeGraphResponse(a);console.log("nodes:",i,"edges:",n);const l=new er;l.nodes=i||[],l.edges=n||[],l.nodeIdMap={};for(let c=0;c<l.nodes.length;c++)l.nodeIdMap[String(l.nodes[c].id)]=c;l.edgeIdMap={};for(let c=0;c<l.edges.length;c++)l.edgeIdMap[String(l.edges[c].id)]=c;l.buildDynamicMap();const d=new Ps({allowSelfLoops:!0});l.nodes.forEach(c=>{var g,k,x,T,w;const f={x:(g=c.x)!=null?g:Math.random()*10-5,y:(k=c.y)!=null?k:Math.random()*10-5,size:(x=c.size)!=null?x:4,color:(T=c.color)!=null?T:"#7aa2ff",label:((w=c.properties)==null?void 0:w.entity_id)||c.id,labels:c.labels||[],properties:c.properties||{}};d.addNode(String(c.id),f)}),l.edges.forEach(c=>{var w,I,O;const f=Number((I=(w=c.properties)==null?void 0:w.weight)!=null?I:1),g=Math.min(6,1+f*1.5),k={label:c.id,properties:c.properties||{},source:String(c.source),target:String(c.target),type:c.type||void 0,size:g},x=c.type==="DIRECTED"?"curvedArrow":"curvedNoArrow",T=(O=c.id)!=null?O:`${c.source}->${c.target}`;d.addEdgeWithKey(String(T),String(c.source),String(c.target),{...k,type:x})}),this.setRawGraph(l),this.setSigmaGraph(d),this.setGraphIsEmpty(d.order===0),this.incrementGraphDataVersion(),e&&e.label&&this.setLastSuccessfulQueryLabel(String(e.label))}catch(e){throw console.error("fetchGraph failed:",e),this.setSigmaGraph(null),this.setRawGraph(null),this.setGraphIsEmpty(!0),e}finally{this.setIsFetching(!1)}},_normalizeGraphResponse(e){return e?Array.isArray(e.nodes)&&Array.isArray(e.edges)?e:e.data&&Array.isArray(e.data.nodes)&&Array.isArray(e.data.edges)?e.data:{nodes:[],edges:[]}:{nodes:[],edges:[]}},async updateNodeAndSelect(e,t,s,a){const i=this.sigmaGraph,n=this.rawGraph;if(!(!i||!n||!i.hasNode(String(e))))try{const l=i.getNodeAttributes(String(e));if(e===t&&s==="entity_id"){const d=String(a);i.addNode(d,{...l,label:d});const c=[];i.forEachEdge(e,(g,k,x,T)=>{const w=x===e?T:x,I=x===e,O=k.dynamicId||g,F=n.edgeDynamicIdMap[O],S=i.addEdge(I?d:w,I?w:d,k);F!==void 0&&c.push({originalDynamicId:O,newEdgeId:S,edgeIndex:F}),i.dropEdge(g)}),i.dropNode(String(e));const f=n.nodeIdMap[String(e)];f!==void 0&&(n.nodes[f].id=d,n.nodes[f].labels=[d],n.nodes[f].properties.entity_id=d,delete n.nodeIdMap[String(e)],n.nodeIdMap[d]=f),c.forEach(({originalDynamicId:g,newEdgeId:k,edgeIndex:x})=>{const T=n.edges[x];T&&(T.source===e&&(T.source=d),T.target===e&&(T.target=d),T.dynamicId=k,delete n.edgeDynamicIdMap[g],n.edgeDynamicIdMap[k]=x)}),this.setSelectedNode(d,!0)}else{const d=n.nodeIdMap[String(e)];d!==void 0&&(n.nodes[d].properties[s]=a,s==="entity_id"&&(n.nodes[d].labels=[a],i.setNodeAttribute(String(e),"label",String(a)))),this.incrementGraphDataVersion()}}catch(l){throw console.error("updateNodeAndSelect error:",l),new Error("Failed to update node in graph")}},async updateEdgeAndSelect(e,t,s,a,i,n){const l=this.sigmaGraph,d=this.rawGraph;if(!(!l||!d))try{const c=d.edgeIdMap[String(e)];c!==void 0&&d.edges[c]&&(d.edges[c].properties[i]=n,t!==void 0&&i==="keywords"&&l.setEdgeAttribute(t,"label",String(n))),this.incrementGraphDataVersion(),this.setSelectedEdge(t)}catch(c){throw console.error(`updateEdgeAndSelect error for ${s}->${a}:`,c),new Error("Failed to update edge in graph")}},async loadGraph(){var e,t;graphStore.sigmaGraph||createRenderer(new Je),await graphStore.fetchAllDatabaseLabels();try{const s={"X-Workspace":ee().workspaceId};await graphStore.fetchGraph({query:{limit:1e3},headers:s}),console.log("order",(e=graphStore.sigmaGraph)==null?void 0:e.order,"edges",(t=graphStore.sigmaGraph)==null?void 0:t.size)}catch(s){console.error(s)}}}}),bs=e=>e[Math.floor(Math.random()*e.length)],tr=[{question:"Which data structure follows the First-In-First-Out (FIFO) principle?",options:["Stack","Queue","Tree","Graph"],correctOptions:[1],difficultyLevel:"medium",aiRational:"Queues process elements in the order they are inserted, making them ideal for task scheduling scenarios.",source:"Computer Science Fundamentals",tag:"Data Structures"},{question:"What is the capital city of Japan?",options:["Seoul","Tokyo","Kyoto","Osaka"],correctOptions:[1],difficultyLevel:"easy",aiRational:"Tokyo has been the political and economic center of Japan since 1868, making it the capital city.",source:"World Geography Reference",tag:"Geography"},{question:"Which law explains the relationship between voltage, current, and resistance?",options:["Faraday's Law","Newton's Law","Ohm's Law","Maxwell's Equation"],correctOptions:[2],difficultyLevel:"medium",aiRational:"Ohm's Law states that voltage equals current multiplied by resistance, forming the foundation of circuit analysis.",source:"Physics Core Concepts",tag:"Physics"}],sr=[{question:"Design a project brief for implementing a flipped classroom model in a high school setting.",difficultyLevel:"hard",aiRational:"This assignment evaluates strategic planning, curriculum design, and an understanding of pedagogical frameworks.",source:"Instructional Design Toolkit",tag:"Education"},{question:"Compose a reflection on how renewable energy adoption can transform urban infrastructures over the next decade.",difficultyLevel:"medium",aiRational:"Encourages learners to synthesize environmental science with socio-economic impacts for future-forward thinking.",source:"Sustainable Cities Program",tag:"Environmental Science"},{question:"Outline a user journey map for a mental wellness mobile application aimed at university students.",difficultyLevel:"medium",aiRational:"Focuses on empathy mapping, UX research, and translating insights into a product strategy.",source:"Digital Product Studio",tag:"Design Thinking"}],ar=[{question:"Create a five-question formative quiz that assesses understanding of the water cycle, including misconceptions.",difficultyLevel:"easy",aiRational:"Highlights the ability to scaffold learning checkpoints aligned with scientific literacy.",source:"Middle School Science Lab",tag:"Science"},{question:"Draft a collaborative workshop outline for onboarding new remote employees in a global organization.",difficultyLevel:"medium",aiRational:"Targets facilitation skills, asynchronous engagement, and inclusive team culture design.",source:"People Operations Playbook",tag:"People & Culture"}],rr=[{question:"Define neuroplasticity and provide an example of its role in learning resilience.",difficultyLevel:"medium",aiRational:"Reinforces conceptual clarity with practical application, suited for rapid revision.",source:"Cognitive Science Primer",tag:"Neuroscience"},{question:"Explain the purpose of Bloom's taxonomy in instructional design.",difficultyLevel:"easy",aiRational:"Supports quick recall of core pedagogical frameworks for lesson planning.",source:"Teaching Methodologies Handbook",tag:"Education"}],Wt=[{id:"mcq-generator",name:"MCQ Generator",description:"Create structured multiple-choice questions enriched with rationales.",icon:"mdi-help-box-multiple-outline",quickAction:"Generate MCQ"},{id:"distractor-generator",name:"Distractor Generator",description:"Generate alternate distractors for an existing MCQ question.",icon:"mdi-arrange-bring-forward",quickAction:"Generate Distractors",is_new:!0},{id:"graph-visualizer",name:"Knowledge Graph Visualizer",description:"Visualize and explore relationships between concepts using an interactive graph.",icon:"mdi-graph-outline",quickAction:"Visualize Graph",is_new:!0}],_s=()=>`output-${Math.random().toString(36).slice(2,10)}`,ir=()=>`viewer-${Math.random().toString(36).slice(2,10)}`,Qt=(e,t=0)=>{var s,a,i,n;return{id:(s=e==null?void 0:e.id)!=null?s:ir(),name:((a=e==null?void 0:e.name)==null?void 0:a.trim())||`Viewer ${t+1}`,meta:(i=e==null?void 0:e.meta)!=null?i:null,isViewer:(n=e==null?void 0:e.isViewer)!=null?n:!0}},gt=()=>{const e=bs(tr);return{id:_s(),type:"mcq",...e}},yt=(e=sr)=>{const t=bs(e);return{id:_s(),type:"assignment",options:[],correctOptions:[],...t}},ws=(e="")=>{const t=/canvas\s+(\d+)$/i.exec(e.trim());if(!t)return null;const s=Number(t[1]);return Number.isNaN(s)?null:s},Rt=(e=[])=>e.reduce((t,s)=>{const a=ws(s.name);return a?Math.max(t,a):t},0),ze=e=>e?{"X-Workspace":e}:{},jt=(e,t)=>({id:(e==null?void 0:e.id)||"",name:(e==null?void 0:e.name)||(e==null?void 0:e.topic)||`Canvas ${t+1}`,outputs:[],meta:e||null}),ks=e=>Array.isArray(e)?e:e&&typeof e=="object"?Object.values(e):typeof e=="string"?[e]:[],or=e=>ks(e).map(t=>String(t)),Ss=(e,t)=>{const s=Array.isArray(e)?e:e&&typeof e=="object"?Array.isArray(e.indices)?e.indices:Object.values(e):[],a=new Set;return s.forEach(i=>{const n=Number(i);Number.isInteger(n)&&n>=0&&(t===void 0||n<t)&&a.add(n)}),Array.from(a)},nr=e=>Array.isArray(e)?e.map(t=>{if(!t)return null;const s=Array.isArray(t.options)?t.options.map(n=>String(n)):[],a=t.correct_answers||t.correctIndexes||t.correct_indexes,i=Ss(a,s.length);return{id:t.id||null,difficulty_level:t.difficulty_level||t.difficultyLevel||null,options:s,correct_answers:i,rationale:t.rationale||t.ai_rational||""}}).filter(t=>t!==null):[],lr=e=>{if(!e)return null;const t=or(e.options),s=Ss(e.correct_answers,t.length),a=ks(e.tags);return{id:e.id||`question-${Math.random().toString(36).slice(2,10)}`,type:e.type||"mcq",question:e.question_text||"Generated question",options:t,correctOptions:s,difficultyLevel:e.difficulty_level||"medium",aiRational:e.ai_rational||e.rationale||"Generated by AI.",source:e.source||"AI Generator",tag:a.length?a.join(", "):"AI Generated",variants:Array.isArray(e.variants)?e.variants:[],meta:e,questionId:e.id}},Pe=me("home",{state:()=>({tools:Wt,expandedToolIds:Wt.slice(0,0).map(e=>e.id),tabs:[],viewerTabs:[],activeTabId:"",tabCounter:0,viewerTabCounter:0,loading:!1,error:null,creatingCanvas:!1,deletingCanvasIds:[],currentProjectId:"",canvasOutputStatus:{}}),getters:{activeTab(e){return!e.activeTabId&&e.tabs.length?e.tabs[0]:e.tabs.find(t=>t.id===e.activeTabId)||null},activeTabOutputs(){return this.activeTab?this.activeTab.outputs:[]},hasActiveOutputs(){return this.activeTabOutputs.length>0},canAddTab(){return Le(),this.tabs.length<2},canAddViewerTab(){return Le(),this.viewerTabs.length<1},viewerTabCount(e){return e.viewerTabs.length},isDeletingCanvas:e=>t=>e.deletingCanvasIds.includes(t),isCanvasLoading:e=>t=>{var s;return!!((s=e.canvasOutputStatus[t])!=null&&s.loading)},hasHydratedCanvas:e=>t=>{var s;return!!((s=e.canvasOutputStatus[t])!=null&&s.loaded)}},actions:{initialise(){!this.activeTabId&&this.tabs.length&&(this.activeTabId=this.tabs[0].id)},setExpandedToolIds(e){this.expandedToolIds=Array.from(new Set(e))},toggleTool(e){this.expandedToolIds.includes(e)?this.expandedToolIds=this.expandedToolIds.filter(t=>t!==e):this.expandedToolIds=[...this.expandedToolIds,e]},setActiveTab(e){if(this.activeTabId=e,!e)return;this.tabs.some(s=>s.id===e)&&this.loadCanvasOutputs({tabId:e}).catch(()=>{})},updateCanvasOutputStatus(e,t={}){if(!e)return;const s={...this.canvasOutputStatus},a=s[e]||{};s[e]={...a,...t},this.canvasOutputStatus=s},applyOutputsToTab(e,t=[]){if(!e)return;const s=this.tabs.find(a=>a.id===e);s&&(s.outputs=t)},setCanvasCollection(e=[]){const t=e.map((n,l)=>jt(n,l));this.tabs=t,this.tabCounter=Rt(t);const s={};if(t.forEach(n=>{this.canvasOutputStatus[n.id]&&(s[n.id]=this.canvasOutputStatus[n.id])}),this.canvasOutputStatus=s,!t.length){this.activeTabId="";return}const a=t.find(n=>n.id===this.activeTabId),i=a?a.id:t[0].id;if(!i){this.activeTabId="";return}this.activeTabId===i?this.loadCanvasOutputs({tabId:i}).catch(()=>{}):this.setActiveTab(i)},async loadCanvasOutputs({tabId:e,force:t=!1}={}){var l;const a=ee().workspaceId||this.currentProjectId,i=e||this.activeTabId;if(!i)return;const n=this.canvasOutputStatus[i];if(t){if(n!=null&&n.loading)return}else if(n!=null&&n.loading||n!=null&&n.loaded)return;this.updateCanvasOutputStatus(i,{loading:!0,loaded:!1,error:null});try{const d=await us({query:{session_id:i,project_id:a,isArchived:!1,page:1,pageSize:50,sort:"updated_at",order:"desc"},headers:ze(a)}),f=(Array.isArray(d==null?void 0:d.questions)?d.questions:Array.isArray((l=d==null?void 0:d.data)==null?void 0:l.questions)?d.data.questions:[]).map(x=>lr(x)).filter(x=>x!==null),g=this.tabs.find(x=>x.id===i);if(Array.isArray(g==null?void 0:g.outputs)&&g.outputs.length>0&&f.length===0&&!t){this.updateCanvasOutputStatus(i,{loading:!1,loaded:!0,error:null});return}this.applyOutputsToTab(i,f),this.updateCanvasOutputStatus(i,{loading:!1,loaded:!0,error:null})}catch(d){throw console.error("Failed to load canvas outputs",d),this.error=d,this.updateCanvasOutputStatus(i,{loading:!1,loaded:!1,error:d}),d}},applyVariantsToQuestion(e,t){if(!e)return!1;const s=nr(t);let a=!1;return this.tabs=this.tabs.map(i=>{const n=i.outputs.map(l=>l&&(l.id===e||l.questionId===e?(a=!0,{...l,variants:s,meta:{...l.meta||{},variants:s}}):l));return{...i,outputs:n}}),a},async loadProjectCanvases({projectId:e,force:t=!1}={}){if(this.loading)return;const s=ee(),a=pe(),i=Le(),n=e||s.workspaceId;if(!n){this.currentProjectId="",this.setCanvasCollection([]);return}if(!(!t&&this.currentProjectId===n&&this.tabs.length)){this.loading=!0,this.error=null,this.currentProjectId=n;try{const l=await Da({projectId:n,userId:a.userId,limit:i.maxCanvasTabs,headers:ze(n)}),d=Array.isArray(l==null?void 0:l.canvases)?l.canvases:[];this.setCanvasCollection(d)}catch(l){console.error("Failed to load canvases",l),this.error=l,this.setCanvasCollection([])}finally{this.loading=!1}}},async ensureActiveCanvas(){if(this.activeTab)return this.activeTab;if(this.currentProjectId&&(await this.loadProjectCanvases({projectId:this.currentProjectId,force:!0}),this.activeTab))return this.activeTab;if(!this.canAddTab)return null;try{return await this.addTab()}catch(e){return console.error("Failed to ensure active canvas",e),null}},async addTab({name:e}={}){if(!this.canAddTab)return!1;const t=ee(),s=pe(),a=t.workspaceId||this.currentProjectId;if(!a)return this.error=new Error("Select a project before creating a canvas."),!1;const i=ze(a),n=typeof e=="string"?e.trim():"",l=this.tabCounter+1,d=n||`Canvas ${l}`;this.creatingCanvas=!0,this.error=null;try{const c=await Va({payload:{user_id:s.userId,project_id:a,topic:d},headers:i}),f=c==null?void 0:c.session_id;if(!f)throw new Error("The server did not return a session identifier.");let g=null;try{const T=await Na({id:f,headers:i});g=(T==null?void 0:T.canvas)||null}catch(T){console.warn("Failed to fetch canvas metadata",T)}const k=jt(g||{id:f,name:d,topic:d,userId:s.userId,projectId:a},this.tabs.length);k.id=f;const x=ws(k.name)||l;return this.tabCounter=Math.max(this.tabCounter,x),this.tabs=[...this.tabs,k],this.currentProjectId=a,this.setActiveTab(k.id),k}catch(c){throw console.error("Failed to create canvas",c),this.error=c,c}finally{this.creatingCanvas=!1}},async closeTab(e){var n;if(!e||!this.tabs.find(l=>l.id===e))return!1;const a=ee().workspaceId||this.currentProjectId,i=ze(a);this.deletingCanvasIds=Array.from(new Set([...this.deletingCanvasIds,e])),this.error=null;try{await $a({id:e,headers:i}),this.tabs=this.tabs.filter(d=>d.id!==e);const l={...this.canvasOutputStatus};if(delete l[e],this.canvasOutputStatus=l,this.activeTabId===e){const d=((n=this.tabs[0])==null?void 0:n.id)||"";d?this.setActiveTab(d):this.activeTabId=""}return this.tabCounter=Rt(this.tabs),!0}catch(l){throw console.error("Failed to delete canvas",l),this.error=l,l}finally{this.deletingCanvasIds=this.deletingCanvasIds.filter(l=>l!==e)}},discardActiveTabOutputs(){this.activeTab&&(this.activeTab.outputs=[])},async deleteOutputById(e){var l;const t=this.activeTab;if(!t)return;const s=t.outputs.find(d=>d.id===e);if(!s)return;const a=s.questionId||((l=s.meta)==null?void 0:l.id);if(t.outputs=t.outputs.filter(d=>d.id!==e),!a)return;const n=ee().workspaceId||this.currentProjectId;try{await Aa({id:a,headers:ze(n)})}catch(d){console.error("Failed to delete question",d),this.error=d}},resetWorkspace(){this.setCanvasCollection([]),this.currentProjectId="",this.tabCounter=0},async appendOutputs(e){if(!Array.isArray(e)||e.length===0)return;const t=await this.ensureActiveCanvas();if(!t)throw new Error("No canvas available to accept generated outputs.");t.outputs=[...t.outputs,...e],this.updateCanvasOutputStatus(t.id,{loaded:!0,loading:!1,error:null})},async executeTool(e){try{const t=await this.ensureActiveCanvas();if(!t)return null;const i=({"mcq-generator":()=>gt(),"assignment-generator":()=>yt(),"quiz-builder":()=>Math.random()>.5?gt():yt(ar),"flashcard-creator":()=>yt(rr)}[e]||(()=>gt()))();return t.outputs=[...t.outputs,i],i}catch(t){return console.error("Failed to execute tool",t),this.error=t,null}},setViewerTabs(e=[]){const t=e.map((s,a)=>Qt(s,a));this.viewerTabs=t,this.viewerTabCounter=t.length},createViewerTab(e={}){if(!this.canAddViewerTab)return null;const t=this.viewerTabCounter+1,s=Qt({name:e.name,meta:e.meta,id:e.id,isViewer:!0},t-1);return this.viewerTabs.some(a=>a.id===s.id)?null:(this.viewerTabs=[...this.viewerTabs,s],this.viewerTabCounter=this.viewerTabs.length,s)},removeViewerTab(e){return!e||!this.viewerTabs.some(s=>s.id===e)?!1:(this.viewerTabs=this.viewerTabs.filter(s=>s.id!==e),this.viewerTabCounter=this.viewerTabs.length,!0)},async loadGraph(){const e=Vt();await e.fetchAllDatabaseLabels();const t={"X-Workspace":ee().workspaceId};await e.fetchGraph({query:{limit:1e3},headers:t})},async handleVisualizeGraph(){try{const e=this.createViewerTab({name:`Viewer ${this.viewerTabCounter+1}`,meta:{},isViewer:!0});this.setActiveTab(e.id),await this.loadGraph()}catch(e){return console.error("Failed to visualize graph",e),this.error=e,null}}}}),dr=()=>({topics:"",quantity:5,difficulty:"medium",allowMulti:!1,onlyTF:!1,userInstructions:"",userNotes:"",sessionId:"",projectId:"",userId:"",maxConcurrency:5,loading:!1,error:null,lastMessage:"",advancedOpen:!1}),cr=(e,t)=>{if(!Array.isArray(t))return[];const s=t.map(a=>{const i=Number(a);return Number.isNaN(i)?null:e&&e.length&&i>=e.length&&i-1>=0?i-1:i}).filter(a=>a!==null);return[...new Set(s)].filter(a=>a>=0&&a<e.length)},ur=(e,t)=>{const s=Array.isArray(e==null?void 0:e.options)?e.options:[],a=cr(s,(e==null?void 0:e.correct_answers)||(e==null?void 0:e.correctOptions)),i=Array.isArray(e==null?void 0:e.tags)?e.tags.join(", "):(e==null?void 0:e.tag)||"AI Generated";return{id:`ai-${Date.now()}-${Math.random().toString(36).slice(2,8)}`,type:"mcq",question:(e==null?void 0:e.question_text)||(e==null?void 0:e.question)||"Generated question",options:s,correctOptions:a,difficultyLevel:(e==null?void 0:e.difficulty_level)||t,aiRational:(e==null?void 0:e.ai_rational)||(e==null?void 0:e.rationale)||"",source:(e==null?void 0:e.source)||"AI Generator",tag:i}},pr=me("mcqGenerator",{state:dr,getters:{canGenerate(e){return e.topics.trim().length>0&&!e.loading}},actions:{initialise(){const e=pe();this.userId||(this.userId=e.userId)},toggleAdvanced(e){this.advancedOpen=typeof e=="boolean"?e:!this.advancedOpen},resetStatus(){this.error=null,this.lastMessage=""},async generate(){if(!this.canGenerate)return;const e=ee();if(!e.hasWorkspace){this.error=new Error("Select a workspace before generating questions.");return}const t=pe(),s=Pe(),a=await s.ensureActiveCanvas();if(!a){this.error=new Error("Create a canvas before generating questions.");return}const i=a.id||s.activeTabId||"default";this.sessionId=i;const n={session_id:i,project_id:this.projectId||e.workspaceId,user_id:this.userId||t.userId,topics:this.topics,n:this.quantity,difficulty:this.difficulty,user_instructions:this.userInstructions,user_notes:this.userNotes,max_concurrency:this.maxConcurrency,allow_multi:this.allowMulti,only_tf:this.onlyTF};this.loading=!0,this.error=null,this.lastMessage="";try{const l=await Ia({payload:n,headers:{"X-Workspace":e.workspaceId}}),d=Array.isArray(l==null?void 0:l.questions)?l.questions:[];if(!d.length){this.error=new Error("The generator returned no questions. Try different topics or settings.");return}const c=d.map(f=>ur(f,this.difficulty));if(!c.length){this.error=new Error("Unable to interpret the generated questions.");return}await s.appendOutputs(c);try{await s.loadCanvasOutputs({tabId:i,force:!0})}catch(f){console.warn("Failed to refresh canvas questions",f)}this.lastMessage=(l==null?void 0:l.message)||`Generated ${c.length} questions.`}catch(l){console.error("Failed to generate questions",l),this.error=l}finally{this.loading=!1}}}}),dt=me("header",{state:()=>({title:"",description:"",showBack:!1,actions:[]}),actions:{setHeader({title:e="",description:t="",showBack:s=!1,actions:a=[]}={}){this.title=e,this.description=t,this.showBack=s,this.actions=Array.isArray(a)?a:[]},resetHeader(){this.title="",this.description="",this.showBack=!1,this.actions=[]}}}),Bt=()=>({questionId:"",selectedQuestionText:"",selectionActive:!1,instructions:"",loading:!1,error:null,lastMessage:""}),xs=me("distractorGenerator",{state:Bt,actions:{setQuestionId(e){const t=typeof e=="string"?e:"",s=this.questionId;this.questionId=t,t!==s&&(this.selectedQuestionText="")},setInstructions(e){this.instructions=e},beginSelection(){this.selectionActive=!0,this.error=null},completeSelection({id:e,text:t}){e&&(this.questionId=e,this.selectedQuestionText=t||"",this.selectionActive=!1,this.error=null)},cancelSelection(){this.selectionActive=!1},clearSelection(){this.questionId="",this.selectedQuestionText="",this.selectionActive=!1},reset(){Object.assign(this,Bt())},async generate(){const e=this.questionId.trim();if(!e){this.error=new Error("Enter a question ID first.");return}const t=pe(),s=ee(),a=Pe();this.loading=!0,this.error=null,this.lastMessage="",this.selectionActive=!1;try{const i=await Ta({questionId:e,payload:{user_id:t.userId,instructions:this.instructions.trim()||void 0,persist:!0},headers:s.workspaceId?{"X-Workspace":s.workspaceId}:void 0}),n=Array.isArray(i==null?void 0:i.variants)?i.variants:[];if(!a.applyVariantsToQuestion(e,n)){this.error=new Error("Unable to find that question on the current canvas.");return}this.lastMessage=(i==null?void 0:i.message)||`Generated ${n.length} variant sets.`}catch(i){console.error("Failed to generate distractors",i),this.error=i}finally{this.loading=!1}}}}),fr={class:"app-page-header__bar"},mr={class:"app-page-header__brand"},hr={class:"app-page-header__brand-initials text-subtitle-1 font-weight-semibold"},gr={class:"text-overline text-uppercase text-medium-emphasis mb-1"},yr={class:"text-h5 font-weight-semibold mb-0"},vr={key:0,class:"app-page-header__actions"},br={key:0,class:"text-body-2 text-medium-emphasis mb-0"},_r={class:"app-page-header__action-buttons"},wr=ge({__name:"AppPageHeader",props:{title:{default:""},description:{default:""},showBack:{type:Boolean,default:!1},actions:{default:()=>[]}},setup(e){const t=e,s=_t(),a=Le(),i=pe(),n=N(()=>a.organization),l=N(()=>a.organizationInitials),d=N(()=>{var x;return(x=t.actions)!=null?x:[]}),c=N(()=>!!t.description||t.showBack||d.value.length>0),f=()=>{s.back()},g=x=>{typeof x.onClick=="function"&&x.onClick()},k=async()=>{try{await ls()}catch(x){console.error(x)}finally{i.clearAuth(),await bt(),await s.push({name:"Login"})}};return(x,T)=>{const w=Xt("RouterLink");return v(),z(Hs,{flat:"",color:"white",class:"app-page-header",height:"76"},{default:o(()=>[r(rt,{class:"py-0",fluid:""},{default:o(()=>[m("div",fr,[m("div",mr,[r(w,{class:"app-page-header__brand-link",to:{name:"Dashboard"},"aria-label":"Go to dashboard",title:"Go to dashboard"},{default:o(()=>[r(be,{color:"primary",size:"48",variant:"flat"},{default:o(()=>[m("span",hr,M(l.value),1)]),_:1}),m("div",null,[m("p",gr,M(n.value),1),m("h1",yr,M(e.title),1)])]),_:1})]),c.value?(v(),$("div",vr,[e.description?(v(),$("p",br,M(e.description),1)):K("",!0),m("div",_r,[e.showBack?(v(),z(q,{key:0,variant:"text",color:"primary","prepend-icon":"mdi-arrow-left",onClick:f},{default:o(()=>[...T[0]||(T[0]=[_(" Go Back ",-1)])]),_:1})):K("",!0),(v(!0),$(Z,null,oe(d.value,I=>(v(),z(q,{key:I.id,variant:I.variant||"flat",color:I.color||"primary",class:"px-6","prepend-icon":I.icon,to:I.to,disabled:I.disabled,loading:I.loading,onClick:O=>g(I)},{default:o(()=>[_(M(I.label),1)]),_:2},1032,["variant","color","prepend-icon","to","disabled","loading","onClick"]))),128))])])):K("",!0)])]),_:1}),y(i).isAuthenticated?(v(),z(q,{key:0,variant:"flat",style:{margin:"16px"},"prepend-icon":"mdi-logout",color:"red",onClick:k},{default:o(()=>[...T[1]||(T[1]=[_(" Logout ",-1)])]),_:1})):K("",!0)]),_:1})}}}),he=(e,t)=>{const s=e.__vccOpts||e;for(const[a,i]of t)s[a]=i;return s},kr=he(wr,[["__scopeId","data-v-01c84cfe"]]),Sr=ge({__name:"App",setup(e){const t=wt(),s=Le(),a=dt(),{title:i,description:n,showBack:l,actions:d}=ne(a),c=N(()=>i.value||s.appName),f=N(()=>n.value||""),g=N(()=>l.value),k=N(()=>d.value||[]);return te(()=>t.name,()=>{i.value||a.setHeader({title:s.appName})},{immediate:!0}),(x,T)=>{const w=Xt("router-view");return v(),z(Xs,null,{default:o(()=>[r(kr,{title:c.value,description:f.value,"show-back":g.value,actions:k.value},null,8,["title","description","show-back","actions"]),r(Ks,{class:"app-main"},{default:o(()=>[r(w)]),_:1})]),_:1})}}}),xr=he(Sr,[["__scopeId","data-v-9200b5f6"]]),Ar={class:"dashboard-page"},Cr={class:"dashboard-page__intro"},Ir={class:"dashboard-page__actions-toolbar"},Tr={key:0,class:"dashboard-page__state"},Vr={key:1,class:"dashboard-page__state"},Er={class:"dashboard-page__card-header"},$r={class:"dashboard-page__card-meta"},Dr={class:"dashboard-page__card-meta-top"},Nr={class:"text-subtitle-1 font-weight-semibold mb-1"},Fr={class:"text-caption text-medium-emphasis mb-0"},Or={class:"text-body-2 text-medium-emphasis mb-0"},Lr={key:3,class:"dashboard-page__state"},Mr={class:"text-body-2 mb-0"},Pr=ge({__name:"DashboardPage",setup(e){const t=Tt(),s=_t(),a=dt(),{workspaces:i,loading:n,error:l,hasWorkspaces:d}=ne(t),c=Y(!1),f=Y("create"),g=Y(""),k=Y(!1),x=Y(""),T=Y(""),w=Y(""),I=Y(!1),O=Y(!1),F=Y(null),S=N(()=>f.value==="edit"),E=N(()=>S.value?"Edit Workspace":"Create Workspace"),G=()=>{t.initialise({force:!0})},H=U=>{if(!U)return"recently";const A=new Date(U);return Number.isNaN(A.getTime())?"recently":A.toLocaleDateString(void 0,{month:"short",day:"numeric",year:"numeric"})},L=()=>{x.value="",T.value="",w.value="",g.value="",f.value="create"},u=()=>{L(),f.value="create",c.value=!0},p=U=>{L(),f.value="edit",g.value=U.id,x.value=U.name,T.value=U.instructions==="No instructions provided."?"":U.instructions,c.value=!0},h=()=>{c.value=!1,L()},C=async()=>{if(!x.value.trim()){w.value="Workspace name is required.";return}k.value=!0,w.value="";try{let U;S.value?U=await t.updateWorkspace({id:g.value,name:x.value,instructions:T.value}):U=await t.createWorkspace({name:x.value,instructions:T.value}),h(),U!=null&&U.id&&s.push({name:"Studio",query:{workspaceId:U.id}})}catch(U){w.value=(U==null?void 0:U.message)||`Failed to ${S.value?"update":"create"} workspace.`}finally{k.value=!1}},D=U=>{F.value={id:U.id,name:U.name},I.value=!0,w.value=""},B=()=>{I.value=!1,F.value=null,w.value=""},J=async()=>{var U;if((U=F.value)!=null&&U.id){O.value=!0,w.value="";try{await t.deleteWorkspace({id:F.value.id}),B()}catch(A){w.value=(A==null?void 0:A.message)||"Failed to delete workspace."}finally{O.value=!1}}},X=()=>{a.setHeader({title:"Workspace Dashboard",description:"Curate your knowledge spaces and continue building content.",actions:[{id:"go-questions",label:"Go to Questions Library",icon:"mdi-file-document-multiple-outline",variant:"text",to:{name:"Questions"}}]})};return Ne(()=>{t.initialise(),X()}),Kt(()=>{X()}),Jt(()=>{a.resetHeader()}),tt(()=>{a.resetHeader()}),te([n,k,O],()=>{X()}),(U,A)=>(v(),$("div",Ar,[r(rt,{fluid:"",class:"dashboard-page__content"},{default:o(()=>[m("div",Cr,[A[6]||(A[6]=m("div",null,[m("h2",{class:"text-subtitle-1 font-weight-semibold mb-1"},"Curate your knowledge spaces")],-1)),m("div",Ir,[r(q,{color:"primary",variant:"flat","prepend-icon":"mdi-plus-circle-outline",disabled:y(n)||k.value,onClick:u},{default:o(()=>[...A[4]||(A[4]=[_(" Create Workspace ",-1)])]),_:1},8,["disabled"]),r(q,{color:"primary",variant:"text","prepend-icon":"mdi-refresh",loading:y(n),onClick:G},{default:o(()=>[...A[5]||(A[5]=[_(" Refresh ",-1)])]),_:1},8,["loading"])])]),y(n)?(v(),$("div",Tr,[r(Be,{indeterminate:"",color:"primary",size:"40"}),A[7]||(A[7]=m("p",{class:"text-body-2 text-medium-emphasis mt-3 mb-0"},"Loading workspaces",-1))])):y(l)?(v(),$("div",Vr,[r(fe,{size:"36",color:"primary"},{default:o(()=>[...A[8]||(A[8]=[_("mdi-alert-circle-outline",-1)])]),_:1}),A[10]||(A[10]=m("p",{class:"text-body-2 text-medium-emphasis mt-3 mb-2"},"Unable to load workspaces.",-1)),r(q,{color:"primary",variant:"flat",onClick:G},{default:o(()=>[...A[9]||(A[9]=[_("Try Again",-1)])]),_:1})])):(v(),z(st,{key:2,class:"dashboard-page__grid",align:"stretch",justify:"start"},{default:o(()=>[(v(!0),$(Z,null,oe(y(i),R=>(v(),z(de,{key:R.id,cols:"12",sm:"6",md:"4",class:"dashboard-page__grid-item"},{default:o(()=>[r(re,{class:"dashboard-page__card",elevation:"2"},{default:o(()=>[r(Re,{class:"pb-2"},{default:o(()=>[m("div",Er,[r(be,{color:"primary",size:"40",variant:"flat"},{default:o(()=>[r(fe,{size:"20",color:"white"},{default:o(()=>[...A[11]||(A[11]=[_("mdi-folder-outline",-1)])]),_:1})]),_:1}),m("div",$r,[m("div",Dr,[m("h3",Nr,M(R.name),1),r(es,{location:"bottom end"},{activator:o(({props:se})=>[r(q,Yt({icon:"",variant:"text",color:"primary"},{ref_for:!0},se),{default:o(()=>[r(fe,null,{default:o(()=>[...A[12]||(A[12]=[_("mdi-dots-vertical",-1)])]),_:1})]),_:1},16)]),default:o(()=>[r(Ve,{density:"comfortable"},{default:o(()=>[r(ie,{onClick:se=>p(R)},{default:o(()=>[r(We,null,{default:o(()=>[...A[13]||(A[13]=[_("Edit workspace",-1)])]),_:1})]),_:1},8,["onClick"]),r(ie,{onClick:se=>D(R)},{default:o(()=>[r(We,null,{default:o(()=>[...A[14]||(A[14]=[_("Delete workspace",-1)])]),_:1})]),_:1},8,["onClick"])]),_:2},1024)]),_:2},1024)]),m("p",Fr," Created "+M(H(R.createdAt)),1)])])]),_:2},1024),r(ue,{class:"dashboard-page__card-text"},{default:o(()=>[m("p",Or,M(R.instructions),1)]),_:2},1024),r(De,{class:"pt-0"},{default:o(()=>[r(q,{variant:"text",color:"primary","prepend-icon":"mdi-launch",to:{name:"Studio",query:{workspaceId:R.id}}},{default:o(()=>[...A[15]||(A[15]=[_(" Open Workspace ",-1)])]),_:1},8,["to"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})),!y(n)&&!y(d)&&!y(l)?(v(),$("div",Lr,[r(fe,{size:"36",color:"primary"},{default:o(()=>[...A[16]||(A[16]=[_("mdi-folder-remove-outline",-1)])]),_:1}),A[17]||(A[17]=m("p",{class:"text-body-2 text-medium-emphasis mt-3 mb-0"}," No workspaces have been created for this user yet. ",-1))])):K("",!0)]),_:1}),r(Qe,{modelValue:c.value,"onUpdate:modelValue":A[2]||(A[2]=R=>c.value=R),"max-width":"480"},{default:o(()=>[r(re,null,{default:o(()=>[r(xe,{class:"text-h6 font-weight-semibold"},{default:o(()=>[_(M(E.value),1)]),_:1}),r(ue,{class:"pt-4"},{default:o(()=>[r(_e,{modelValue:x.value,"onUpdate:modelValue":A[0]||(A[0]=R=>x.value=R),label:"Workspace name",variant:"outlined",density:"comfortable",disabled:k.value,required:""},null,8,["modelValue","disabled"]),r(je,{modelValue:T.value,"onUpdate:modelValue":A[1]||(A[1]=R=>T.value=R),label:"Instructions (optional)",variant:"outlined",density:"comfortable","auto-grow":"",rows:"3",disabled:k.value},null,8,["modelValue","disabled"]),w.value?(v(),z(Ae,{key:0,type:"error",variant:"tonal",density:"comfortable",class:"mt-3"},{default:o(()=>[_(M(w.value),1)]),_:1})):K("",!0)]),_:1}),r(De,{class:"justify-end"},{default:o(()=>[r(q,{variant:"text",color:"primary",onClick:h,disabled:k.value},{default:o(()=>[...A[18]||(A[18]=[_(" Cancel ",-1)])]),_:1},8,["disabled"]),r(q,{color:"primary",variant:"flat",loading:k.value,onClick:C},{default:o(()=>[_(M(S.value?"Save Changes":"Create"),1)]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),r(Qe,{modelValue:I.value,"onUpdate:modelValue":A[3]||(A[3]=R=>I.value=R),"max-width":"420"},{default:o(()=>[r(re,null,{default:o(()=>[r(xe,{class:"text-h6 font-weight-semibold"},{default:o(()=>[...A[19]||(A[19]=[_("Delete Workspace",-1)])]),_:1}),r(ue,null,{default:o(()=>{var R;return[m("p",Mr,[A[20]||(A[20]=_(" Are you sure you want to delete ",-1)),m("strong",null,M(((R=F.value)==null?void 0:R.name)||"this workspace"),1),A[21]||(A[21]=_("? This action cannot be undone. ",-1))]),w.value?(v(),z(Ae,{key:0,type:"error",variant:"tonal",density:"comfortable",class:"mt-3"},{default:o(()=>[_(M(w.value),1)]),_:1})):K("",!0)]}),_:1}),r(De,{class:"justify-end"},{default:o(()=>[r(q,{variant:"text",color:"primary",onClick:B,disabled:O.value},{default:o(()=>[...A[22]||(A[22]=[_(" Cancel ",-1)])]),_:1},8,["disabled"]),r(q,{color:"error",variant:"flat",loading:O.value,onClick:J},{default:o(()=>[...A[23]||(A[23]=[_(" Delete ",-1)])]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}}),Ur=he(Pr,[["__scopeId","data-v-a7bf0d69"]]),qr={class:"mcq-generator"},zr={class:"mcq-generator__body"},Gr={class:"mcq-generator__inputs"},Wr={key:0,class:"mcq-generator__alert"},Qr={key:1,class:"mcq-generator__alert"},Rr={class:"mcq-generator__actions"},jr=ge({__name:"MCQGeneratorForm",setup(e){const t=pr(),{topics:s,quantity:a,difficulty:i,allowMulti:n,onlyTF:l,userInstructions:d,loading:c,error:f,lastMessage:g}=ne(t),k=[{title:"Easy",value:"easy"},{title:"Medium",value:"medium"},{title:"Hard",value:"hard"}],x=N({get:()=>a.value,set:F=>{const S=Number.isNaN(Number(F))?1:Math.min(Math.max(Number(F),1),20);t.quantity=S}}),T=N(()=>t.canGenerate),w=N(()=>f.value?f.value.message||"Failed to generate questions.":""),I=N(()=>g.value),O=()=>{t.generate()};return Ne(()=>{t.initialise()}),te(l,F=>{F&&(t.allowMulti=!1)}),(F,S)=>(v(),$("div",qr,[m("div",zr,[r(je,{modelValue:y(s),"onUpdate:modelValue":S[0]||(S[0]=E=>ce(s)?s.value=E:null),label:"Topics",variant:"outlined","auto-grow":"",rows:"2","max-rows":"4",density:"comfortable",placeholder:"e.g. Photosynthesis basics, plant biology",disabled:y(c)},null,8,["modelValue","disabled"]),m("div",Gr,[r(_e,{modelValue:x.value,"onUpdate:modelValue":S[1]||(S[1]=E=>x.value=E),modelModifiers:{number:!0},label:"Number of questions",type:"number",min:"1",max:"20",variant:"outlined",density:"comfortable",disabled:y(c)},null,8,["modelValue","disabled"]),r(ye,{modelValue:y(i),"onUpdate:modelValue":S[2]||(S[2]=E=>ce(i)?i.value=E:null),items:k,label:"Difficulty",variant:"outlined",density:"comfortable",disabled:y(c)},null,8,["modelValue","disabled"])]),r(je,{modelValue:y(d),"onUpdate:modelValue":S[3]||(S[3]=E=>ce(d)?d.value=E:null),label:"Primary instructions",variant:"outlined",rows:"2","max-rows":"4","auto-grow":"",density:"comfortable",placeholder:"Include key misconceptions or emphasise real-world examples",disabled:y(c)},null,8,["modelValue","disabled"]),r(Nt,{modelValue:y(l),"onUpdate:modelValue":S[4]||(S[4]=E=>ce(l)?l.value=E:null),inset:"",label:"Only True / False questions",disabled:y(c)||y(n)},null,8,["modelValue","disabled"]),r(Nt,{modelValue:y(n),"onUpdate:modelValue":S[5]||(S[5]=E=>ce(n)?n.value=E:null),inset:"",label:"Allow multiple correct answers",disabled:y(c)||y(l)},null,8,["modelValue","disabled"]),w.value?(v(),$("div",Wr,[r(Ae,{type:"error",variant:"tonal",density:"compact"},{default:o(()=>[_(M(w.value),1)]),_:1})])):K("",!0),I.value?(v(),$("div",Qr,[r(Ae,{type:"success",variant:"tonal",density:"compact"},{default:o(()=>[_(M(I.value),1)]),_:1})])):K("",!0)]),m("div",Rr,[r(Js),r(q,{color:"primary",variant:"flat",disabled:!T.value,loading:y(c),"prepend-icon":"mdi-timer-play",onClick:O},{default:o(()=>[...S[6]||(S[6]=[_(" Generate Questions ",-1)])]),_:1},8,["disabled","loading"])])]))}}),Br=he(jr,[["__scopeId","data-v-aaa9347d"]]),Hr={class:"distractor-form"},Xr={class:"distractor-form__section"},Kr={class:"distractor-form__selector"},Jr={class:"distractor-form__preview-header"},Yr={class:"distractor-form__preview-text"},Zr={class:"distractor-form__section"},ei={class:"distractor-form__actions"},ti={class:"distractor-form__action-buttons"},si=ge({__name:"DistractorGeneratorForm",setup(e){const t=xs(),{questionId:s,instructions:a,loading:i,error:n,lastMessage:l,selectionActive:d,selectedQuestionText:c}=ne(t),f=N({get:()=>s.value,set:F=>t.setQuestionId(F)}),g=N({get:()=>a.value,set:F=>t.setInstructions(F)}),k=N(()=>s.value.trim().length>0&&!i.value),x=N(()=>n.value?n.value.message||"Failed to generate variants.":""),T=N(()=>d.value?"Click a question to use it":s.value?"Change selected question":"Select a question from the canvas"),w=()=>{t.generate()},I=()=>{t.reset()},O=()=>{d.value?t.cancelSelection():t.beginSelection()};return(F,S)=>(v(),$("div",Hr,[r(ve,{class:"distractor-form__divider"}),r(ss,{class:"distractor-form__content",onSubmit:$e(w,["prevent"])},{default:o(()=>[m("section",Xr,[m("div",Kr,[r(q,{variant:"outlined",color:"primary","prepend-icon":"mdi-cursor-default-click",class:Ge({"distractor-form__selector-btn--active":y(d)}),onClick:$e(O,["prevent"]),disabled:y(i)},{default:o(()=>[_(M(T.value),1)]),_:1},8,["class","disabled"]),r(qe,{name:"fade"},{default:o(()=>[y(s)?(v(),z(Ee,{key:0,label:"",color:"primary",variant:"flat",size:"small"},{default:o(()=>[_(" ID: "+M(y(s)),1)]),_:1})):K("",!0)]),_:1})]),r(qe,{name:"fade"},{default:o(()=>[y(d)?(v(),z(Ae,{key:0,type:"info",variant:"tonal",density:"comfortable",class:"distractor-form__selection-hint"},{default:o(()=>[...S[2]||(S[2]=[_(" Click an MCQ card on the canvas to import it here. ",-1)])]),_:1})):K("",!0)]),_:1}),r(qe,{name:"fade"},{default:o(()=>[y(c)?(v(),z(ts,{key:0,class:"distractor-form__preview",color:"primary",variant:"tonal"},{default:o(()=>[m("div",Jr,[S[4]||(S[4]=m("p",{class:"distractor-form__preview-label"},"Selected question",-1)),r(q,{variant:"text",color:"primary",size:"small","prepend-icon":"mdi-sync",onClick:$e(O,["prevent"])},{default:o(()=>[...S[3]||(S[3]=[_(" Choose different ",-1)])]),_:1})]),m("p",Yr,M(y(c)),1)]),_:1})):K("",!0)]),_:1})]),m("section",Zr,[r(_e,{modelValue:f.value,"onUpdate:modelValue":S[0]||(S[0]=E=>f.value=E),label:"Question ID",variant:"outlined",density:"comfortable",placeholder:"Select a question or enter the ID manually",disabled:y(i),required:""},null,8,["modelValue","disabled"]),r(je,{modelValue:g.value,"onUpdate:modelValue":S[1]||(S[1]=E=>g.value=E),label:"Additional instructions (optional)",variant:"outlined",density:"comfortable",rows:"3","auto-grow":"",disabled:y(i),placeholder:"e.g. Focus on misconceptions or highlight similar-sounding terms"},null,8,["modelValue","disabled"])]),m("div",ei,[S[7]||(S[7]=m("div",{class:"distractor-form__action-copy"},[m("p",{class:"text-caption text-medium-emphasis mb-0"}," Note: Variants are added to the selected MCQ on the current canvas. Youll see them expand under the card. ")],-1)),m("div",ti,[r(q,{variant:"text",color:"primary",onClick:I,disabled:y(i)},{default:o(()=>[...S[5]||(S[5]=[_(" Reset ",-1)])]),_:1},8,["disabled"]),r(q,{color:"primary",variant:"flat","prepend-icon":"mdi-arrange-bring-forward",type:"submit",loading:y(i),disabled:y(i)||!k.value},{default:o(()=>[...S[6]||(S[6]=[_(" Generate Distractors ",-1)])]),_:1},8,["loading","disabled"])])]),r(qe,{name:"fade"},{default:o(()=>[y(n)?(v(),z(Ae,{key:0,type:"error",variant:"tonal",density:"comfortable",class:"distractor-form__alert"},{default:o(()=>[_(M(x.value),1)]),_:1})):K("",!0)]),_:1}),r(qe,{name:"fade"},{default:o(()=>[y(l)?(v(),z(Ae,{key:0,type:"success",variant:"tonal",density:"comfortable",class:"distractor-form__alert"},{default:o(()=>[_(M(y(l)),1)]),_:1})):K("",!0)]),_:1})]),_:1})]))}}),ai=he(si,[["__scopeId","data-v-50514e00"]]),ri={class:"d-flex align-center justify-space-between w-100"},ii={class:"tools-panel__tool-meta"},oi={key:0,class:"distractor-form__header"},ni={class:"distractor-form__header-copy"},li={class:"distractor-form__eyebrow-line"},di={class:"text-subtitle-1 font-weight-semibold mb-1"},ci={class:"text-body-2 text-medium-emphasis mb-0"},ui={key:2,class:"tools-panel__cta"},pi=ge({__name:"CreativeToolkitPanel",setup(e){const t=Pe(),s=ne(t),a=N(()=>s.tools.value),i=s.expandedToolIds,n=N({get:()=>i.value,set:d=>{const c=Array.isArray(d)?d:d?[d]:[];t.setExpandedToolIds(c)}}),l=d=>{if(!(d==="mcq-generator"||d==="distractor-generator")){if(d==="graph-visualizer"){t.handleVisualizeGraph();return}t.executeTool(d)}};return(d,c)=>(v(),z(re,{class:"tools-panel d-flex flex-column h-100",elevation:"2"},{default:o(()=>[r(ue,{class:"pt-4 tools-panel__scroll flex-grow-1"},{default:o(()=>[r(Ys,{modelValue:n.value,"onUpdate:modelValue":c[0]||(c[0]=f=>n.value=f),multiple:"",elevation:"0",class:"tool-expansion"},{default:o(()=>[(v(!0),$(Z,null,oe(a.value,f=>(v(),z(Zs,{key:f.id,value:f.id},{default:o(()=>[r(ea,{"expand-icon":"mdi-chevron-down"},{default:o(()=>[m("div",ri,[m("div",ii,[r(be,{color:"primary",size:"44",variant:"flat"},{default:o(()=>[r(fe,{icon:f.icon,size:"22",color:"white"},null,8,["icon"])]),_:2},1024),m("div",null,[f.is_new?(v(),$("header",oi,[m("div",ni,[m("div",li,[r(Ee,{label:"",size:"x-small",color:"orange",variant:"flat",class:"distractor-form__badge"},{default:o(()=>[...c[1]||(c[1]=[_(" New ",-1)])]),_:1})])])])):K("",!0),m("p",di,M(f.name),1),m("p",ci,M(f.description),1)])])])]),_:2},1024),r(ta,null,{default:o(()=>[f.id==="mcq-generator"?(v(),z(Br,{key:0})):f.id==="distractor-generator"?(v(),z(ai,{key:1})):(v(),$("div",ui,[r(q,{color:"primary",variant:"flat",block:"",style:{"padding-block":"14px"},"prepend-icon":"mdi-play-circle-outline",onClick:()=>l(f.id)},{default:o(()=>[_(M(f.quickAction),1)]),_:2},1032,["onClick"])]))]),_:2},1024)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}))}}),fi=he(pi,[["__scopeId","data-v-bb05c104"]]),mi={class:"files-pane"},hi={class:"files-pane__actions"},gi={key:0,class:"files-pane__state"},yi={key:1,class:"files-pane__state"},vi={key:2,class:"files-pane__state"},bi={class:"chat-pane"},_i={key:0,class:"chat-pane__state"},wi={class:"text-body-2 text-medium-emphasis mt-2 mb-0"},ki={key:1,class:"chat-pane__state"},Si=["innerHTML"],xi={class:"chat-pane__composer"},Ai={class:"chat-pane__composer-actions"},Ci=ge({__name:"ToolsPanel",setup(e){const t=Za(),s=ja(),a=Ya(),i=ee(),n=pe(),{activeTab:l}=ne(t),{documents:d,loading:c,error:f,menuOpen:g,uploadDialogOpen:k,linksDialogOpen:x,uploadFiles:T,uploadInProgress:w,linkEntries:I,linkSubmissionInProgress:O,hasDocuments:F,canSubmitFiles:S,canSubmitLinks:E}=ne(s),{messages:G,inputValue:H,streaming:L,error:u,hasMessages:p,canSend:h}=ne(a),C=Y(null),D=N({get:()=>T.value,set:j=>{s.setUploadFiles(j)}}),B=j=>j==="user"?"chat-bubble--user":"chat-bubble--assistant",J=j=>j.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;"),X=j=>{let b=J(j);return b=b.replace(/\*\*([^*]+)\*\*/g,"<strong>$1</strong>"),b=b.replace(/\*([^*]+)\*/g,"<em>$1</em>"),b=b.replace(/`([^`]+)`/g,"<code>$1</code>"),b},U=j=>{if(!j)return"";const b=j.split(`
`),Q=[];let Se=[],Ie=!1,Xe=[];const ut=()=>{if(!Se.length)return;const Te=Se.map(Ke=>`<li>${X(Ke)}</li>`).join("");Q.push(`<ul>${Te}</ul>`),Se=[]},Et=()=>{Xe.length&&(Q.push(`<pre><code>${J(Xe.join(`
`))}</code></pre>`),Xe=[])};return b.forEach(Te=>{const Ke=Te.trim();if(Ke.startsWith("```")){Ie?(Et(),Ie=!1):(ut(),Ie=!0);return}if(Ie){Xe.push(Te);return}const $t=Te.match(/^\s*[-*]\s+(.*)$/);if($t){Se.push($t[1]);return}ut();const pt=Te.match(/^(#{1,3})\s+(.*)$/);if(pt){const Dt=Math.min(pt[1].length+2,6);Q.push(`<h${Dt}>${X(pt[2])}</h${Dt}>`);return}if(!Ke){Q.push("");return}Q.push(`<p>${X(Te)}</p>`)}),Ie?Et():ut(),Q.filter(Boolean).join("")},A=j=>{if(!j)return"recently";const b=new Date(j);return Number.isNaN(b.getTime())?"recently":b.toLocaleDateString(void 0,{month:"short",day:"numeric",year:"numeric"})},R=()=>{s.openUploadDialog()},se=()=>{s.openLinksDialog()},we=()=>{s.closeUploadDialog()},Ue=()=>{s.closeLinksDialog()},Fe=()=>{s.addLinkField()},Ce=j=>{s.removeLinkField(j)},le=(j,b)=>{s.updateLinkField(j,b)},ke=()=>{s.uploadSelectedFiles()},P=()=>{s.submitLinks()},V=()=>{s.fetchDocuments()},W=()=>{a.clearConversation()},Vs=()=>{a.sendMessage()};return Ne(()=>{s.fetchDocuments()}),te(()=>i.workspaceId,(j,b)=>{(j&&j!==b||j&&!b)&&s.fetchDocuments()},{immediate:!0}),te(()=>n.userId,(j,b)=>{j&&j!==b&&a.hydrateHistoryForCurrentUser()},{immediate:!0}),te(()=>G.value.map(j=>`${j.id}:${j.content}`).join("|"),async()=>{await bt();const j=C.value;j&&(j.scrollTop=j.scrollHeight)},{immediate:!0}),(j,b)=>(v(),z(re,{class:"tool-shell",elevation:"2"},{default:o(()=>[r(as,{modelValue:y(l),"onUpdate:modelValue":b[0]||(b[0]=Q=>ce(l)?l.value=Q:null),class:"tool-shell__tabs",color:"primary",grow:""},{default:o(()=>[r(Ye,{value:"files",class:"tool-shell__tab"},{default:o(()=>[...b[7]||(b[7]=[m("span",null,"Files",-1)])]),_:1}),r(Ye,{value:"search",class:"tool-shell__tab"},{default:o(()=>[...b[8]||(b[8]=[m("span",null,"Search with AI",-1)])]),_:1}),r(Ye,{value:"creative",class:"tool-shell__tab"},{default:o(()=>[...b[9]||(b[9]=[m("span",null,"AI Toolkit",-1)])]),_:1})]),_:1},8,["modelValue"]),r(rs,{modelValue:y(l),"onUpdate:modelValue":b[3]||(b[3]=Q=>ce(l)?l.value=Q:null),class:"tool-shell__window"},{default:o(()=>[r(Ze,{value:"files",class:"tool-shell__pane"},{default:o(()=>[m("div",mi,[m("div",hi,[r(q,{variant:"text",color:"primary","prepend-icon":"mdi-refresh",loading:y(c),onClick:V},{default:o(()=>[...b[10]||(b[10]=[_(" Refresh ",-1)])]),_:1},8,["loading"]),r(es,{modelValue:y(g),"onUpdate:modelValue":b[1]||(b[1]=Q=>ce(g)?g.value=Q:null),location:"bottom",offset:8,transition:"fade-transition"},{activator:o(({props:Q})=>[r(q,Yt({color:"primary",variant:"flat","prepend-icon":"mdi-plus"},Q),{default:o(()=>[...b[11]||(b[11]=[_(" Add Content ",-1)])]),_:1},16)]),default:o(()=>[r(Ve,null,{default:o(()=>[r(ie,{onClick:R},{default:o(()=>[r(We,null,{default:o(()=>[...b[12]||(b[12]=[_("Upload Files",-1)])]),_:1})]),_:1}),r(ie,{onClick:se},{default:o(()=>[r(We,null,{default:o(()=>[...b[13]||(b[13]=[_("Add Webpage Links",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),y(c)?(v(),$("div",gi,[r(Be,{indeterminate:"",color:"primary",size:"32"}),b[14]||(b[14]=m("p",{class:"text-body-2 text-medium-emphasis mt-3 mb-0"},"Loading documents",-1))])):y(f)?(v(),$("div",yi,[r(fe,{size:"32",color:"primary"},{default:o(()=>[...b[15]||(b[15]=[_("mdi-alert-circle-outline",-1)])]),_:1}),b[17]||(b[17]=m("p",{class:"text-body-2 text-medium-emphasis mt-3 mb-2"},"Failed to load documents.",-1)),r(q,{color:"primary",variant:"flat",onClick:V},{default:o(()=>[...b[16]||(b[16]=[_("Try Again",-1)])]),_:1})])):y(F)?(v(),z(Ve,{key:3,class:"files-pane__list",density:"comfortable"},{default:o(()=>[(v(!0),$(Z,null,oe(y(d),Q=>(v(),z(ie,{key:Q.id,class:"files-pane__list-item"},{prepend:o(()=>[r(be,{size:"36",color:"primary",variant:"flat"},{default:o(()=>[r(fe,{size:"18",color:"white"},{default:o(()=>[...b[20]||(b[20]=[_("mdi-file-document",-1)])]),_:1})]),_:1})]),default:o(()=>[r(We,{class:"text-subtitle-2"},{default:o(()=>[_(M(Q.name),1)]),_:2},1024),r(aa,{class:"text-caption text-medium-emphasis"},{default:o(()=>[_(" Updated "+M(A(Q.updatedAt))+"  Status: "+M(Q.status||"unknown"),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})):(v(),$("div",vi,[r(fe,{size:"32",color:"primary"},{default:o(()=>[...b[18]||(b[18]=[_("mdi-folder-outline",-1)])]),_:1}),b[19]||(b[19]=m("p",{class:"text-body-2 text-medium-emphasis mt-3 mb-0"}," No documents available yet. Upload files or add links to begin. ",-1))]))])]),_:1}),r(Ze,{value:"search",class:"tool-shell__pane"},{default:o(()=>[m("div",bi,[m("div",{class:"chat-pane__messages",ref_key:"messagesContainer",ref:C},[y(u)?(v(),$("div",_i,[r(fe,{size:"28",color:"primary"},{default:o(()=>[...b[21]||(b[21]=[_("mdi-alert-circle-outline",-1)])]),_:1}),m("p",wi,M(y(u).message||"Something went wrong"),1)])):y(p)?(v(!0),$(Z,{key:2},oe(y(G),Q=>(v(),$("div",{key:Q.id,class:Ge(["chat-bubble",B(Q.role)])},[m("div",{class:"chat-bubble__content",innerHTML:U(Q.content)},null,8,Si)],2))),128)):(v(),$("div",ki,[...b[22]||(b[22]=[m("p",{class:"text-body-2 text-medium-emphasis mt-2 mb-0"},"Start a conversation to see AI responses.",-1)])]))],512),m("div",xi,[r(je,{variant:"outlined",density:"comfortable",rows:"2","max-rows":"4","auto-grow":"",placeholder:"Type your question...",modelValue:y(H),"onUpdate:modelValue":b[2]||(b[2]=Q=>ce(H)?H.value=Q:null),disabled:y(L)},null,8,["modelValue","disabled"]),m("div",Ai,[r(q,{variant:"text",color:"primary","prepend-icon":"mdi-broom",onClick:W,disabled:!y(p)||y(L)},{default:o(()=>[...b[23]||(b[23]=[_(" Clear ",-1)])]),_:1},8,["disabled"]),r(q,{color:"primary",variant:"flat","prepend-icon":"mdi-send",onClick:Vs,disabled:!y(h),loading:y(L)},{default:o(()=>[...b[24]||(b[24]=[_(" Send ",-1)])]),_:1},8,["disabled","loading"])])])])]),_:1}),r(Ze,{value:"creative",class:"tool-shell__pane"},{default:o(()=>[r(fi)]),_:1})]),_:1},8,["modelValue"]),r(Qe,{modelValue:y(k),"onUpdate:modelValue":b[5]||(b[5]=Q=>ce(k)?k.value=Q:null),"max-width":"520",persistent:""},{default:o(()=>[r(re,null,{default:o(()=>[r(xe,{class:"text-h6 font-weight-semibold"},{default:o(()=>[...b[25]||(b[25]=[_("Upload Files",-1)])]),_:1}),r(ue,null,{default:o(()=>[r(sa,{variant:"outlined",multiple:"","show-size":"",accept:".pdf,.doc,.docx,.txt,.md,.ppt,.pptx,.xls,.xlsx",label:"Select files","prepend-inner-icon":"mdi-paperclip",modelValue:D.value,"onUpdate:modelValue":b[4]||(b[4]=Q=>D.value=Q)},null,8,["modelValue"])]),_:1}),r(De,{class:"justify-end"},{default:o(()=>[r(q,{variant:"text",onClick:we},{default:o(()=>[...b[26]||(b[26]=[_("Cancel",-1)])]),_:1}),r(q,{color:"primary",variant:"flat",disabled:!y(S),loading:y(w),onClick:ke},{default:o(()=>[...b[27]||(b[27]=[_(" Upload ",-1)])]),_:1},8,["disabled","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),r(Qe,{modelValue:y(x),"onUpdate:modelValue":b[6]||(b[6]=Q=>ce(x)?x.value=Q:null),"max-width":"520",persistent:""},{default:o(()=>[r(re,null,{default:o(()=>[r(xe,{class:"text-h6 font-weight-semibold"},{default:o(()=>[...b[28]||(b[28]=[_("Add Webpage Links",-1)])]),_:1}),r(ue,{class:"d-flex flex-column gap-3"},{default:o(()=>[(v(!0),$(Z,null,oe(y(I),(Q,Se)=>(v(),z(_e,{key:`link-${Se}`,variant:"outlined",density:"comfortable",label:"Web link",placeholder:"https://example.com/article","append-inner-icon":y(I).length>1?"mdi-close":void 0,"onClick:appendInner":()=>Ce(Se),"onUpdate:modelValue":Ie=>le(Se,Ie),"model-value":Q},null,8,["append-inner-icon","onClick:appendInner","onUpdate:modelValue","model-value"]))),128)),r(q,{variant:"text",color:"primary","prepend-icon":"mdi-plus",onClick:Fe},{default:o(()=>[...b[29]||(b[29]=[_(" Add another link ",-1)])]),_:1})]),_:1}),r(De,{class:"justify-end"},{default:o(()=>[r(q,{variant:"text",onClick:Ue},{default:o(()=>[...b[30]||(b[30]=[_("Cancel",-1)])]),_:1}),r(q,{color:"primary",variant:"flat",disabled:!y(E),loading:y(O),onClick:P},{default:o(()=>[...b[31]||(b[31]=[_(" Save Links ",-1)])]),_:1},8,["disabled","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}))}}),Ii=he(Ci,[["__scopeId","data-v-2a23c04a"]]),Ti={class:"d-flex align-center justify-space-between flex-wrap gap-3"},Vi={class:"d-flex align-center gap-2"},Ei={class:"question-card__header-actions"},$i=["innerHTML"],Di={class:"options"},Ni={class:"option__index-text"},Fi={class:"option-text"},Oi={class:"metadata__value"},Li={key:0,class:"variants"},Mi={class:"variant-card__header"},Pi={class:"variant-card__options"},Ui={class:"variant-option__index-text"},qi={class:"variant-option__text"},zi={key:0,class:"variant-card__rationale"},Gi=ge({__name:"MCQCard",props:{mcq:{},showActions:{type:Boolean,default:!0},selectable:{type:Boolean,default:!1},selected:{type:Boolean,default:!1}},emits:["delete","select"],setup(e,{expose:t,emit:s}){const a=e,i=s,n=N(()=>a.mcq.type==="mcq"?"MCQ":a.mcq.type==="multiple_response"?"Multiple Response":a.mcq.type==="true_false"?"True / False":"Question"),l=Y(!1),d=N(()=>Array.isArray(a.mcq.variants)?a.mcq.variants:[]),c=N(()=>d.value.length>0),f=N(()=>{var E;return(E={easy:"Easy",medium:"Medium",hard:"Hard"}[a.mcq.difficultyLevel])!=null?E:a.mcq.difficultyLevel}),g=S=>String.fromCharCode(65+S),k=S=>S.difficulty_level?`${S.difficulty_level.replace(/_/g," ")}`.replace(/\b\w/g,E=>E.toUpperCase()):"Variant",x=()=>i("delete",a.mcq.id),T=()=>l.value=!l.value,w=()=>{a.selectable&&i("select",{id:a.mcq.id,question:a.mcq.question})};function I(S){if(!S)return"";const E=S.replace(/<pre>\s*<code(?![^>]*class=)/gim,'<pre><code class="language-python"');return Es.sanitize(E,{USE_PROFILES:{html:!0}})}const O=N(()=>I(a.mcq.question)),F={mounted(S){Lt.highlightAllUnder(S)},updated(S){Lt.highlightAllUnder(S)}};return t({}),Ne(()=>{}),te(()=>a.mcq.question,()=>{}),(S,E)=>(v(),z(re,{class:Ge(["question-card",{"question-card--selectable":e.selectable,"question-card--selected":e.selected,"question-card--selection-active":e.selectable&&!e.selected}]),variant:"outlined",onClick:w},{default:o(()=>[r(Re,null,{default:o(()=>[m("div",Ti,[m("div",Vi,[r(Ee,{label:"",color:"primary",variant:"flat",size:"small",class:"chip--contrast"},{default:o(()=>[_(M(n.value),1)]),_:1})]),m("div",Ei,[c.value?(v(),z(q,{key:0,variant:"text",size:"small",color:"primary","prepend-icon":"mdi-arrange-bring-forward",onClick:$e(T,["stop"])},{default:o(()=>[_(M(l.value?"Hide":"Show")+" Variants ("+M(d.value.length)+") ",1)]),_:1})):K("",!0),e.showActions?(v(),z(q,{key:1,variant:"flat",size:"small",color:"primary","prepend-icon":"mdi-delete-outline",onClick:$e(x,["stop"])},{default:o(()=>[...E[0]||(E[0]=[_(" Remove ",-1)])]),_:1})):K("",!0)])])]),_:1}),r(ve,{class:"mx-6"}),r(ue,null,{default:o(()=>[Zt(m("div",{class:"question-text",innerHTML:O.value},null,8,$i),[[F]]),m("div",Di,[(v(!0),$(Z,null,oe(e.mcq.options,(G,H)=>(v(),$("div",{key:`${e.mcq.id}-${H}`,class:Ge(["option",{"option--correct":e.mcq.correctOptions.includes(H)}])},[r(be,{size:"28",color:"primary",variant:"flat",class:"option__index"},{default:o(()=>[m("span",Ni,M(g(H)),1)]),_:2},1024),m("span",Fi,M(G),1),e.mcq.correctOptions.includes(H)?(v(),z(fe,{key:0,size:"18",color:"rgba(17, 24, 39, 1)"},{default:o(()=>[...E[1]||(E[1]=[_(" mdi-check-circle-outline ",-1)])]),_:1})):K("",!0)],2))),128))]),r(ve,{class:"my-4"}),r(st,{class:"metadata",align:"stretch","no-gutters":""},{default:o(()=>[r(de,{cols:"12",md:"2",class:"pr-md-4 mb-4 mb-md-0"},{default:o(()=>[E[2]||(E[2]=m("p",{class:"metadata__label"},"Difficulty Level",-1)),r(Ee,{label:"",color:"primary",variant:"outlined",size:"small",class:"text-uppercase"},{default:o(()=>[_(M(f.value),1)]),_:1})]),_:1}),r(de,{cols:"12",md:"7",class:"pr-md-4 mb-4 mb-md-0"},{default:o(()=>[E[3]||(E[3]=m("p",{class:"metadata__label"},"Source",-1)),m("p",Oi,M(e.mcq.source),1)]),_:1}),r(de,{cols:"12",md:"3"},{default:o(()=>[E[4]||(E[4]=m("p",{class:"metadata__label"},"Tag",-1)),r(Ee,{label:"",size:"small",color:"primary",variant:"outlined"},{default:o(()=>[_(M(e.mcq.tag),1)]),_:1})]),_:1})]),_:1}),r(ra,null,{default:o(()=>[l.value?(v(),$("div",Li,[(v(!0),$(Z,null,oe(d.value,G=>(v(),$("div",{key:G.id||k(G),class:"variant-card"},[m("div",Mi,[r(Ee,{label:"",size:"small",color:"primary",variant:"outlined"},{default:o(()=>[_(M(k(G)),1)]),_:2},1024)]),m("div",Pi,[(v(!0),$(Z,null,oe(G.options,(H,L)=>(v(),$("div",{key:`${G.id||k(G)}-${L}`,class:Ge(["variant-option",{"variant-option--correct":G.correct_answers.includes(L)}])},[r(be,{size:"24",color:"primary",variant:"flat",class:"variant-option__index"},{default:o(()=>[m("span",Ui,M(g(L)),1)]),_:2},1024),m("span",qi,M(H),1)],2))),128))]),G.rationale?(v(),$("p",zi,M(G.rationale),1)):K("",!0)]))),128))])):K("",!0)]),_:1})]),_:1})]),_:1},8,["class"]))}}),As=he(Gi,[["__scopeId","data-v-b34eca35"]]),Wi={key:0,class:"pa-2",style:{"max-width":"320px"}},Qi={class:"text-subtitle-1 font-weight-bold"},Ri={key:0},ji={class:"d-flex align-center w-100"},Bi={class:"text-medium-emphasis mr-2",style:{"min-width":"96px"}},Hi=["title"],Xi={key:1},Ki={class:"d-flex align-center w-100"},Ji={class:"text-medium-emphasis mr-2",style:{"min-width":"96px"}},Yi=["title"],Zi={class:"d-flex align-center ga-2"},eo=["title"],to={__name:"GraphPropertiesView",setup(e){const t=Vt(),s=N(()=>t.selectedNode),a=N(()=>t.focusedNode),i=N(()=>t.selectedEdge),n=N(()=>t.focusedEdge),l=N(()=>t.sigmaGraph),d=N(()=>t.rawGraph),c=N(()=>t.graphDataVersion),f=Y(null),g=Y(null);function k(u){var p,h,C;return u?(C=(p=u.properties)==null?void 0:p.entity_id)!=null?C:String((h=u.id)!=null?h:""):""}function x(u){var J,X,U;const p=l.value,h=d.value;if(!p||!h||!p.hasNode(String(u)))return null;const C=h.getNode(String(u));if(!C)return null;const D=(J=p.degree(String(u)))!=null?J:0,B=[];try{const A=p.edges(String(u));for(const R of A){if(!p.hasEdge(R))continue;const se=p.getEdgeAttributes(R)||{},we=(X=se.source)!=null?X:p.source(R),Ue=(U=se.target)!=null?U:p.target(R),Fe=String(we)===String(u),Ce=Fe?Ue:we;if(!p.hasNode(String(Ce)))continue;const le=h.getNode(String(Ce));le&&B.push({type:Fe?"Out":"In",id:String(Ce),label:k(le)})}}catch{}return{...C,degree:D,relationships:B}}function T(u){const p=l.value,h=d.value;if(!p||!h||!p.hasEdge(String(u)))return null;const C=h.edgeDynamicIdMap[String(u)],D=C!==void 0?h.edges[C]:null;if(!D)return null;let B,J;return p.hasNode(String(D.source))&&(B=h.getNode(String(D.source))),p.hasNode(String(D.target))&&(J=h.getNode(String(D.target))),{...D,dynamicId:String(u),sourceNode:B,targetNode:J}}function w(){if(a.value){f.value="node",g.value=x(a.value);return}if(s.value){f.value="node",g.value=x(s.value);return}if(n.value){f.value="edge",g.value=T(n.value);return}if(i.value){f.value="edge",g.value=T(i.value);return}f.value=null,g.value=null}te([a,s,n,i,l,d,c],w,{immediate:!0});async function I(u,p,h,C){await t.updateNodeAndSelect(u,p,h,C)}async function O(u,p,h,C,D,B){await t.updateEdgeAndSelect(u,p,h,C,D,B)}function F(u){t.setSelectedNode(String(u),!0)}const S=Y(""),E=Y("");function G(){S.value="",E.value=""}async function H(u){var D,B,J,X,U,A,R,se;if(!g.value)return;const p=S.value,h=E.value,C=g.value;try{f.value==="node"?await I(C.id,(B=(D=C.properties)==null?void 0:D.entity_id)!=null?B:C.id,p,h):f.value==="edge"&&await O(C.id,C.dynamicId,(U=(X=(J=C.sourceNode)==null?void 0:J.properties)==null?void 0:X.entity_id)!=null?U:C.source,(se=(R=(A=C.targetNode)==null?void 0:A.properties)==null?void 0:R.entity_id)!=null?se:C.target,p,h)}finally{G(),w()}}function L(u,p){return u==="node"?p==="description"||p==="entity_id":u==="edge"?p==="description"||p==="keywords":!1}return(u,p)=>g.value?(v(),$("div",Wi,[r(re,{class:"bg-surface opacity-95",elevation:"8",rounded:"lg",border:""},{default:o(()=>[r(xe,{class:"d-flex align-center justify-space-between py-2"},{default:o(()=>[m("div",Qi,M(f.value==="node"?"Node":"Edge")+" Properties ",1)]),_:1}),r(ve),r(ue,{class:"py-2"},{default:o(()=>[f.value==="node"?(v(),z(Ve,{key:0,density:"compact",class:"py-0"},{default:o(()=>{var h;return[r(y(ie),{title:"ID",subtitle:String(g.value.id)},null,8,["subtitle"]),r(y(ie),{title:"Labels",subtitle:Array.isArray(g.value.labels)?g.value.labels.join(", "):"",onClick:p[0]||(p[0]=C=>F(g.value.id)),class:"cursor-pointer"},null,8,["subtitle"]),r(y(ie),{title:"Degree",subtitle:String((h=g.value.degree)!=null?h:0)},null,8,["subtitle"])]}),_:1})):(v(),z(Ve,{key:1,density:"compact",class:"py-0"},{default:o(()=>[r(y(ie),{title:"ID",subtitle:String(g.value.id)},null,8,["subtitle"]),g.value.type?(v(),z(y(ie),{key:0,title:"Type",subtitle:String(g.value.type)},null,8,["subtitle"])):K("",!0),r(y(ie),{title:"Source",subtitle:g.value.sourceNode?g.value.sourceNode.labels.join(", "):String(g.value.source),class:"cursor-pointer",onClick:p[1]||(p[1]=h=>F(g.value.source))},null,8,["subtitle"]),r(y(ie),{title:"Target",subtitle:g.value.targetNode?g.value.targetNode.labels.join(", "):String(g.value.target),class:"cursor-pointer",onClick:p[2]||(p[2]=h=>F(g.value.target))},null,8,["subtitle"])]),_:1}))]),_:1}),r(ve),r(ue,{class:"py-2"},{default:o(()=>[p[7]||(p[7]=m("div",{class:"text-body-2 text-primary font-weight-medium mb-1"},"Properties",-1)),r(Ve,{density:"compact",class:"py-0",style:{"max-height":"280px",overflow:"auto"}},{default:o(()=>[(v(!0),$(Z,null,oe(g.value.properties||{},(h,C)=>(v(),$(Z,{key:C},[C!=="created_at"?(v(),$(Z,{key:0},[L(f.value,C)?(v(),$("div",Ri,[r(y(ie),null,{default:o(()=>[m("div",ji,[m("div",Bi,M(C),1),S.value===C?(v(),$(Z,{key:0},[r(_e,{modelValue:E.value,"onUpdate:modelValue":p[3]||(p[3]=D=>E.value=D),"hide-details":"",density:"compact",variant:"outlined",class:"flex-1 mr-2"},null,8,["modelValue"]),r(q,{size:"small",color:"primary",variant:"flat",class:"mr-1",onClick:p[4]||(p[4]=D=>H())},{default:o(()=>[...p[5]||(p[5]=[_(" Save ",-1)])]),_:1}),r(q,{size:"small",variant:"text",onClick:G},{default:o(()=>[...p[6]||(p[6]=[_("Cancel",-1)])]),_:1})],64)):(v(),$("div",{key:1,class:"flex-1 px-2 py-1 rounded bg-primary-container text-primary-on-container overflow-hidden text-truncate",title:typeof h=="string"?h:JSON.stringify(h,null,2)},M(typeof h=="string"?h:JSON.stringify(h)),9,Hi))])]),_:2},1024),r(ve)])):(v(),$("div",Xi,[r(y(ie),null,{default:o(()=>[m("div",Ki,[m("div",Ji,M(C),1),m("div",{class:"flex-1 px-2 py-1 rounded bg-surface-variant text-on-surface-variant overflow-hidden text-truncate",title:typeof h=="string"?h:JSON.stringify(h,null,2)},M(typeof h=="string"?h:JSON.stringify(h)),9,Yi)])]),_:2},1024),r(ve)]))],64)):K("",!0)],64))),128))]),_:1})]),_:1}),f.value==="node"&&g.value.relationships&&g.value.relationships.length?(v(),$(Z,{key:0},[r(ve),r(ue,{class:"py-2"},{default:o(()=>[p[8]||(p[8]=m("div",{class:"text-body-2 text-success font-weight-medium mb-1"},"Relationships",-1)),r(Ve,{density:"compact",class:"py-0",style:{"max-height":"200px",overflow:"auto"}},{default:o(()=>[(v(!0),$(Z,null,oe(g.value.relationships,h=>(v(),z(y(ie),{key:h.id+":"+h.type,class:"cursor-pointer",onClick:C=>F(h.id)},{default:o(()=>[m("div",Zi,[r(Ee,{size:"x-small",label:"",variant:"flat"},{default:o(()=>[_(M(h.type),1)]),_:2},1024),m("div",{class:"text-truncate",title:h.label},M(h.label),9,eo)])]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1})],64)):K("",!0)]),_:1})])):K("",!0)}},so=he(to,[["__scopeId","data-v-8db22cf5"]]),ao={class:"graph-viewer",style:{position:"relative",height:"100%",width:"100%",overflow:"hidden"}},ro={class:"d-flex align-center ga-2"},io={style:{position:"absolute",top:"12px",right:"12px","z-index":"20","max-width":"340px"}},oo={class:"d-flex flex-column align-center ga-3"},Ht=4,Cs={__name:"GraphViewer",setup(e){const t=Y(null),s=Vt(),a=Pe();Y(!1);const i=N(()=>s.isFetching),n=Y(!0);let l=null,d=null;const c={allowInvalidContainer:!0,defaultNodeType:"default",defaultEdgeType:"curvedNoArrow",renderEdgeLabels:!1,labelGridCellSize:100,labelRenderedSizeThreshold:10,enableEdgeEvents:!0,labelColor:{color:"#000",attribute:"labelColor"},edgeLabelColor:{color:"#000",attribute:"labelColor"},edgeLabelSize:15,labelSize:20,defaultNodeSize:8,minNodeSize:1,maxNodeSize:12,defaultEdgeSize:8,minEdgeSize:8,maxEdgeSize:20,edgeProgramClasses:{arrow:Rs,curvedArrow:Qs,curvedNoArrow:Us()},nodeProgramClasses:{default:Ws,circel:Gs,point:zs}};function f(u){const p=u*.618033988749895%1,h=.8,C=.95,D=C*h,B=p*6,J=D*(1-Math.abs(B%2-1));let X=0,U=0,A=0;B<1?[X,U,A]=[D,J,0]:B<2?[X,U,A]=[J,D,0]:B<3?[X,U,A]=[0,D,J]:B<4?[X,U,A]=[0,J,D]:B<5?[X,U,A]=[J,0,D]:[X,U,A]=[0,0,D];const R=C-D,se=we=>Math.round((we+R)*255);return`rgb(${se(X)},${se(U)},${se(A)})`}function g(u){if(!u||u.order===0)return;js.assign(u,{nodeCommunityAttribute:"community"});const p=new Set;u.forEachNode((C,D)=>p.add(D.community));const h={};Array.from(p).forEach((C,D)=>{h[String(C)]=f(D)}),u.forEachNode((C,D)=>u.setNodeAttribute(C,"color",h[String(D.community)]))}function k(u){!u||u.order===0||u.forEachNode(p=>{const h=u.degree(p),X=Math.max(1,Math.min(40,5+Math.log2(1+h)*4));u.setNodeAttribute(p,"size",X)})}function x(u){!u||u.order===0||Bs.assign(u,{iterations:100,settings:{scalingRatio:4,gravity:15,strongGravityMode:!1}})}function T(){if(!l)return;const u=l.getCamera();l.getCustomBBox()&&l.setCustomBBox(null),u.animatedReset({duration:400})}function w(){if(l){try{l.kill()}catch{}l=null}s.setSigmaInstance(null)}function I(u){t.value&&(w(),d=u||new Je,l=new qs(d,t.value,c),s.setSigmaInstance(l),l.on("upNode",L),l.on("mouseupbody",L),l.on("enterNode",()=>{t.value.style.cursor="pointer"}),l.on("leaveNode",()=>{t.value.style.cursor="default"}),l.on("clickNode",({node:p})=>{F||S||s.setSelectedNode(p,!0)}),l.on("downNode",G),l.on("mousemovebody",H),l.on("mouseup",L),l.on("enterNode",({node:p})=>s.setFocusedNode(p)),l.on("leaveNode",()=>s.setFocusedNode(null)))}let O=null,F=!1,S=!1,E={x:0,y:0};function G(u){var p,h,C,D;!n.value||!d||(O=u.node,F=!0,S=!1,E={x:u.x,y:u.y},d.setNodeAttribute(O,"highlighted",!0),u.preventSigmaDefault(),(h=(p=u.original)==null?void 0:p.preventDefault)==null||h.call(p),(D=(C=u.original)==null?void 0:C.stopPropagation)==null||D.call(C))}function H(u){var h,C,D,B;if(!n.value||!F||!O||!l||!d)return;if(!S){const J=u.x-E.x,X=u.y-E.y;J*J+X*X>Ht*Ht&&(S=!0)}const p=l.viewportToGraph({x:u.x,y:u.y});d.setNodeAttribute(O,"x",p.x),d.setNodeAttribute(O,"y",p.y),u.preventSigmaDefault(),(C=(h=u.original)==null?void 0:h.preventDefault)==null||C.call(h),(B=(D=u.original)==null?void 0:D.stopPropagation)==null||B.call(D)}function L(u){var p,h,C,D,B;n.value&&(O&&d&&(d.removeNodeAttribute(O,"highlighted"),O=null),F=!1,(p=u==null?void 0:u.preventSigmaDefault)==null||p.call(u),(C=(h=u==null?void 0:u.original)==null?void 0:h.preventDefault)==null||C.call(h),(B=(D=u==null?void 0:u.original)==null?void 0:D.stopPropagation)==null||B.call(D))}return te(()=>s.sigmaGraph,async u=>{if(I(u||new Je),await bt(),l&&u&&u.order>0){try{g(u)}catch{}k(u),x(u),l.refresh(),T()}},{immediate:!0}),Ne(()=>{I(new Je)}),te(()=>s.sigmaGraph,u=>{!l||!u||(g(u),k(u),x(u),l.refresh(),T())}),$s(()=>{w()}),(u,p)=>(v(),$("div",ao,[r(re,{class:"pa-3",elevation:"8",density:"comfortable",style:{position:"absolute",top:"12px",left:"12px","z-index":"10","min-width":"220px"}},{default:o(()=>[m("div",ro,[r(q,{variant:"flat",onClick:p[0]||(p[0]=h=>y(a).loadGraph()),"prepend-icon":"mdi-refresh"},{default:o(()=>[...p[1]||(p[1]=[_(" Refresh ",-1)])]),_:1}),r(q,{color:"primary",variant:"flat",onClick:T},{default:o(()=>[...p[2]||(p[2]=[_(" Reset camera ",-1)])]),_:1})])]),_:1}),m("div",{ref_key:"containerRef",ref:t,class:"sigma-viewport",style:{height:"100%",width:"100%",background:"var(--v-theme-background)","user-select":"none"}},null,512),Zt(m("div",io,[r(so)],512),[[Ds,y(s).focusedNode]]),r(ia,{"model-value":i.value,class:"align-center justify-center",scrim:"rgba(0,0,0,0.65)",persistent:""},{default:o(()=>[r(re,{class:"pa-4",elevation:"12"},{default:o(()=>[m("div",oo,[r(Be,{indeterminate:"",size:"32",width:"4",color:"primary"}),p[3]||(p[3]=m("div",{class:"text-body-2"},"Loading Graph Data",-1))])]),_:1})]),_:1},8,["model-value"])]))}},no={class:"canvas-panel__header"},lo={class:"canvas-panel__actions"},co={class:"canvas-panel__tab"},uo={class:"canvas-panel__pane"},po={key:0,class:"canvas-panel__viewer"},fo={key:0,class:"canvas-panel__loading"},mo={key:1,class:"canvas-panel__empty"},ho={key:2,class:"canvas-panel__list"},go=ge({__name:"CanvasPanel",setup(e){const t=Pe(),s=xs(),{tabs:a,viewerTabs:i,activeTabId:n,activeTab:l,hasActiveOutputs:d,canAddTab:c,creatingCanvas:f}=ne(t),{selectionActive:g,questionId:k}=ne(s),x=N({get:()=>n.value,set:L=>{typeof L=="string"&&t.setActiveTab(L)}}),T=N(()=>d.value),w=L=>t.isDeletingCanvas(L),I=L=>t.isCanvasLoading(L),O=async()=>{if(!(!c.value||f.value))try{await t.addTab()}catch(L){console.error("Failed to create canvas",L)}},F=async L=>{if(L.isViewer){t.removeViewerTab(L.id);return}S(L.id)},S=async L=>{const u=a.value.find(h=>h.id===L);if(!u)return;if(window.confirm(`Close ${u.name}? All outputs on this canvas will be removed.`))try{await t.closeTab(L)}catch(h){console.error("Failed to close canvas",h)}},E=()=>{if(!T.value)return;window.confirm("Discard all outputs on this canvas?")&&t.discardActiveTabOutputs()},G=async L=>{try{await t.deleteOutputById(L)}catch(u){console.error("Failed to delete output",u)}},H=L=>{g.value&&s.completeSelection({id:L.id,text:L.question})};return(L,u)=>(v(),z(re,{class:"canvas-panel",elevation:"2"},{default:o(()=>[r(Re,{class:"pb-0"},{default:o(()=>[m("div",no,[m("div",lo,[r(q,{variant:"outlined",color:"primary","prepend-icon":"mdi-broom",disabled:!T.value,onClick:E},{default:o(()=>[...u[2]||(u[2]=[_(" Clear Canvas ",-1)])]),_:1},8,["disabled"]),r(q,{color:"primary",variant:"flat","prepend-icon":"mdi-plus-circle-outline",disabled:!y(c)||y(f),loading:y(f),onClick:O},{default:o(()=>[...u[3]||(u[3]=[_(" New Canvas ",-1)])]),_:1},8,["disabled","loading"])])])]),_:1}),r(ue,{class:"canvas-panel__body"},{default:o(()=>[r(as,{modelValue:x.value,"onUpdate:modelValue":u[0]||(u[0]=p=>x.value=p),class:"canvas-panel__tabs","show-arrows":"",color:"primary"},{default:o(()=>[(v(!0),$(Z,null,oe([...y(a),...y(i)],p=>(v(),z(Ye,{key:p.id,value:p.id,class:"text-subtitle-2 font-weight-medium text-capitalize"},{default:o(()=>[m("div",co,[r(fe,{size:"18"},{default:o(()=>[_(M(p.isViewer?"mdi-eye-outline":"mdi-notebook-outline"),1)]),_:2},1024),m("span",null,M(p.name),1),r(q,{size:"x-small",icon:"mdi-close",variant:"text",color:"primary",loading:w(p.id),disabled:w(p.id),onClick:$e(h=>F(p),["stop"])},null,8,["loading","disabled","onClick"])])]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),r(rs,{modelValue:x.value,"onUpdate:modelValue":u[1]||(u[1]=p=>x.value=p),class:"canvas-panel__window"},{default:o(()=>[(v(!0),$(Z,null,oe([...y(a),...y(i)],p=>(v(),z(Ze,{key:p.id,value:p.id},{default:o(()=>{var h;return[m("div",uo,[p.isViewer?(v(),$("div",po,[r(Cs)])):(v(),$(Z,{key:1},[I(p.id)?(v(),$("div",fo,[r(Be,{color:"primary",size:"36",indeterminate:""})])):((h=p.outputs)==null?void 0:h.length)===0?(v(),$("div",mo,[r(ts,{class:"canvas-panel__empty-sheet",color:"white",variant:"outlined"},{default:o(()=>[r(be,{color:"primary",size:"56",variant:"flat"},{default:o(()=>[r(fe,{size:"28",color:"white"},{default:o(()=>[...u[4]||(u[4]=[_("mdi-compass-outline",-1)])]),_:1})]),_:1}),u[5]||(u[5]=m("h3",{class:"text-subtitle-1 font-weight-semibold mt-4 mb-2"},"Your canvas is ready",-1)),u[6]||(u[6]=m("p",{class:"text-body-2 text-medium-emphasis mb-0"}," Trigger a tool from the left panel to see fresh content appear here. ",-1))]),_:1})])):(v(),$("div",ho,[(v(!0),$(Z,null,oe(p.outputs,C=>(v(),z(As,{key:C.id,mcq:C,"show-actions":!0,selectable:y(g),selected:y(k)===C.id,onDelete:G,onSelect:H},null,8,["mcq","selectable","selected"]))),128))]))],64))])]}),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}))}}),yo=he(go,[["__scopeId","data-v-62e6a4e4"]]),vo={class:"studio-page"},bo={class:"studio-page__workspace"},_o=ge({__name:"StudioPage",setup(e){const t=Le(),s=Pe(),a=Tt(),i=ee(),n=dt(),l=wt(),{appName:d,tagline:c}=ne(t),{workspaces:f}=ne(a),{workspaceId:g}=ne(i),k=N(()=>{const w=l.query.workspaceId;return Array.isArray(w)?w[0]:w||""}),x=()=>{let w=k.value,I="";if(!w&&f.value.length>0&&(w=f.value[0].id,I=f.value[0].name),w){const O=f.value.find(F=>F.id===w);O&&(I=O.name)}if(!w){i.resetWorkspace();return}i.setWorkspace({id:w,name:I}),s.loadProjectCanvases({projectId:w,force:!0}).catch(()=>{})},T=()=>{n.setHeader({title:d.value,description:c.value,actions:[{id:"studio-go-questions",label:"Go to Questions Library",icon:"mdi-file-document-multiple-outline",variant:"text",to:{name:"Questions"}}]})};return Ne(()=>{s.initialise(),typeof a.initialise=="function"&&a.initialise(),x(),T()}),Kt(()=>{x(),T()}),Jt(()=>{n.resetHeader()}),tt(()=>{n.resetHeader()}),te([k,f],()=>{x()}),te(g,w=>{s.loadProjectCanvases({projectId:w,force:!0}).catch(()=>{})},{immediate:!0}),te([d,c],()=>T()),(w,I)=>(v(),$("div",vo,[r(rt,{fluid:"",class:"studio-page__content"},{default:o(()=>[m("div",bo,[r(Ii,{class:"studio-page__workspace-panel"}),r(yo,{class:"studio-page__workspace-canvas"})])]),_:1})]))}}),wo=he(_o,[["__scopeId","data-v-2aefaf3f"]]),ko={class:"questions-page"},So={class:"filters-card__actions"},xo={class:"results-card__header"},Ao={key:0,class:"state state--loading"},Co={key:1,class:"state state--empty"},Io={key:2,class:"results-card__list"},To={class:"results-card__footer-controls"},Vo=ge({__name:"QuestionsPage",setup(e){const t=Ra(),s=Tt(),a=ee(),{loading:i,uniqueTags:n,filteredQuestions:l,resultsSummary:d,sessionsLoading:c,exportDialogOpen:f,exportFormat:g,exportFileName:k,exporting:x}=ne(t),{workspaces:T}=ne(s),w=N(()=>t.totalQuestions),I=dt(),O=N({get:()=>t.filters.searchQuery,set:P=>t.setSearchQuery(P)}),F=N({get:()=>t.filters.type,set:P=>t.setFilterType(P)}),S=N({get:()=>t.filters.difficulty,set:P=>t.setFilterDifficulty(P)}),E=N({get:()=>t.filters.tag,set:P=>t.setFilterTag(P)}),G=N({get:()=>t.filters.workspaceId,set:P=>t.setFilterWorkspace(P)}),H=N({get:()=>t.filters.sessionId,set:P=>t.setFilterSession(P)}),L=N({get:()=>t.filters.approved,set:P=>t.setFilterApproved(P)}),u=N({get:()=>t.filters.archived,set:P=>t.setFilterArchived(P)}),p=N({get:()=>t.filters.hasVariants,set:P=>t.setFilterHasVariants(P)}),h=N({get:()=>t.page,set:P=>t.setPage(P)}),C=N({get:()=>t.pageSize,set:P=>t.setPageSize(P)}),D=N(()=>t.pageCount),B=[{title:"All types",value:"all"},{title:"Multiple Choice (single answer)",value:"mcq"},{title:"Multiple Response",value:"multiple_response"},{title:"True False",value:"true_false"}],J=[{title:"All levels",value:"all"},{title:"Easy",value:"easy"},{title:"Medium",value:"medium"},{title:"Hard",value:"hard"}],X=N(()=>[{title:"All tags",value:"all"},...n.value.map(P=>({title:P,value:P}))]),U=N(()=>{const P=Array.isArray(T.value)?T.value:[];return[{title:"All workspaces",value:"all"},...P.map(V=>({title:V.name,value:V.id}))]}),A=N(()=>{const P=t.sessionsForWorkspace(G.value);return[{title:"All canvases",value:"all"},...P.map(V=>({title:V.name,value:V.id}))]}),R=[{title:"All statuses",value:"all"},{title:"Approved",value:"true"},{title:"Not approved",value:"false"}],se=[{title:"Only active",value:"false"},{title:"All",value:"all"},{title:"Only archived",value:"true"}],we=[{title:"All questions",value:"all"},{title:"With variants only",value:"true"}],Ue=[{title:"20 per page",value:20},{title:"40 per page",value:40},{title:"60 per page",value:60},{title:"80 per page",value:80},{title:"100 per page",value:100}],Fe=()=>{t.resetFilters(),ke()},Ce=P=>{var V,W;return{id:P.id,question:P.question,options:(V=P.options)!=null?V:[],correctOptions:(W=P.correct_options)!=null?W:[],difficultyLevel:P.difficulty_level,aiRational:P.ai_rational,source:P.source,type:P.type,tag:P.tag,variants:P.variants||[]}};let le=null;const ke=(P=300)=>{le&&clearTimeout(le),le=setTimeout(()=>{t.fetchQuestions()},P)};return tt(()=>{le&&(clearTimeout(le),le=null)}),te(O,()=>{ke(400)}),te([F,S,E,L,u,H,p],()=>{ke()}),te(G,async P=>{await t.fetchSessionsForWorkspace(P),ke()},{immediate:!0}),te(h,()=>{ke(0)}),te(C,()=>{ke(0)}),Ne(async()=>{typeof s.initialise=="function"&&await s.initialise(),a.workspaceId&&(t.setFilterWorkspace(a.workspaceId),await t.fetchSessionsForWorkspace(a.workspaceId)),await t.fetchQuestions(),I.setHeader({title:"Question Library",description:"Browse and refine every prompt your team has generated.",showBack:!0})}),tt(()=>{le&&(clearTimeout(le),le=null),I.resetHeader()}),(P,V)=>(v(),$("div",ko,[r(rt,{fluid:"",class:"questions-page__content"},{default:o(()=>[r(st,{class:"questions-page__grid",align:"stretch",justify:"stretch"},{default:o(()=>[r(de,{cols:"12",md:"4",lg:"3",class:"questions-page__filters"},{default:o(()=>[r(re,{elevation:"2",class:"filters-card"},{default:o(()=>[r(Re,null,{default:o(()=>[r(xe,{class:"text-h6 font-weight-semibold"},{default:o(()=>[...V[14]||(V[14]=[_("Filters",-1)])]),_:1}),r(Ft,{class:"text-body-2 text-medium-emphasis"},{default:o(()=>[...V[15]||(V[15]=[_(" Narrow down the library by attributes. ",-1)])]),_:1})]),_:1}),r(ue,{class:"pt-0 filters-card__body"},{default:o(()=>[r(_e,{modelValue:O.value,"onUpdate:modelValue":V[0]||(V[0]=W=>O.value=W),label:"Search questions",variant:"solo",color:"primary","prepend-inner-icon":"mdi-magnify","hide-details":"",density:"comfortable",class:"filters-card__full mb-4"},null,8,["modelValue"]),r(st,{class:"filters-card__grid",dense:""},{default:o(()=>[r(de,{cols:"12",sm:"6"},{default:o(()=>[r(ye,{modelValue:F.value,"onUpdate:modelValue":V[1]||(V[1]=W=>F.value=W),items:B,"item-title":"title","item-value":"value",label:"Question type",variant:"solo",density:"comfortable","hide-details":""},null,8,["modelValue"])]),_:1}),r(de,{cols:"12",sm:"6"},{default:o(()=>[r(ye,{modelValue:S.value,"onUpdate:modelValue":V[2]||(V[2]=W=>S.value=W),items:J,"item-title":"title","item-value":"value",label:"Difficulty",variant:"solo",density:"comfortable","hide-details":""},null,8,["modelValue"])]),_:1}),r(de,{cols:"12",sm:"6"},{default:o(()=>[r(ye,{modelValue:G.value,"onUpdate:modelValue":V[3]||(V[3]=W=>G.value=W),items:U.value,"item-title":"title","item-value":"value",label:"Workspace",variant:"solo",density:"comfortable","hide-details":"","menu-props":{maxHeight:240}},null,8,["modelValue","items"])]),_:1}),r(de,{cols:"12",sm:"6"},{default:o(()=>[r(ye,{modelValue:H.value,"onUpdate:modelValue":V[4]||(V[4]=W=>H.value=W),items:A.value,"item-title":"title","item-value":"value",label:"Canvas",variant:"solo",density:"comfortable","hide-details":"","menu-props":{maxHeight:240},loading:y(c),disabled:G.value==="all"},null,8,["modelValue","items","loading","disabled"])]),_:1}),r(de,{cols:"12",sm:"6"},{default:o(()=>[r(ye,{modelValue:L.value,"onUpdate:modelValue":V[5]||(V[5]=W=>L.value=W),items:R,"item-title":"title","item-value":"value",label:"Approval status",variant:"solo",density:"comfortable","hide-details":""},null,8,["modelValue"])]),_:1}),r(de,{cols:"12",sm:"6"},{default:o(()=>[r(ye,{modelValue:u.value,"onUpdate:modelValue":V[6]||(V[6]=W=>u.value=W),items:se,"item-title":"title","item-value":"value",label:"Archived",variant:"solo",density:"comfortable","hide-details":""},null,8,["modelValue"])]),_:1}),r(de,{cols:"12",sm:"6"},{default:o(()=>[r(ye,{modelValue:p.value,"onUpdate:modelValue":V[7]||(V[7]=W=>p.value=W),items:we,"item-title":"title","item-value":"value",label:"Variants",variant:"solo",density:"comfortable","hide-details":""},null,8,["modelValue"])]),_:1}),r(de,{cols:"12",sm:"6"},{default:o(()=>[r(ye,{modelValue:E.value,"onUpdate:modelValue":V[8]||(V[8]=W=>E.value=W),items:X.value,"item-title":"title","item-value":"value",label:"Tag",variant:"solo",density:"comfortable","hide-details":"","menu-props":{maxHeight:240}},null,8,["modelValue","items"])]),_:1})]),_:1}),m("div",So,[r(q,{variant:"outlined",color:"primary","prepend-icon":"mdi-refresh",onClick:Fe},{default:o(()=>[...V[16]||(V[16]=[_(" Reset Filters ",-1)])]),_:1})])]),_:1})]),_:1}),r(q,{color:"primary",class:"mt-4","prepend-icon":"mdi-export",onClick:y(t).openExportDialog},{default:o(()=>[...V[17]||(V[17]=[_(" Export Questions ",-1)])]),_:1},8,["onClick"])]),_:1}),r(de,{cols:"12",md:"8",lg:"9",class:"questions-page__results"},{default:o(()=>[r(re,{elevation:"2",class:"results-card"},{default:o(()=>[r(Re,null,{default:o(()=>[m("div",xo,[m("div",null,[r(xe,{class:"text-h6 font-weight-semibold mb-1"},{default:o(()=>[...V[18]||(V[18]=[_("Results",-1)])]),_:1}),r(Ft,{class:"text-body-2 text-medium-emphasis"},{default:o(()=>[_(M(y(d)),1)]),_:1})])])]),_:1}),r(ve),r(ue,{class:"results-card__body"},{default:o(()=>[y(i)?(v(),$("div",Ao,[r(Be,{indeterminate:"",color:"primary",size:"32"}),V[19]||(V[19]=m("p",{class:"text-body-2 text-medium-emphasis mt-4 mb-0"},"Loading questions",-1))])):y(l).length===0?(v(),$("div",Co,[r(be,{color:"primary",size:"56",variant:"flat"},{default:o(()=>[r(fe,{size:"28",color:"white"},{default:o(()=>[...V[20]||(V[20]=[_("mdi-database-search",-1)])]),_:1})]),_:1}),V[21]||(V[21]=m("h3",{class:"text-subtitle-1 font-weight-semibold mt-4 mb-2"},"No questions match",-1)),V[22]||(V[22]=m("p",{class:"text-body-2 text-medium-emphasis mb-0"}," Adjust your filters or generate fresh content to fill the library. ",-1))])):(v(),$("div",Io,[(v(!0),$(Z,null,oe(y(l),W=>(v(),z(As,{key:W.id,mcq:Ce(W),"show-actions":!1},null,8,["mcq"]))),128))]))]),_:1}),w.value>0?(v(),z(ve,{key:0})):K("",!0),w.value>0?(v(),z(De,{key:1,class:"results-card__footer"},{default:o(()=>[m("div",To,[r(ye,{modelValue:C.value,"onUpdate:modelValue":V[9]||(V[9]=W=>C.value=W),items:Ue,"item-title":"title","item-value":"value",label:"Items per page",variant:"solo",density:"comfortable","hide-details":"",class:"results-card__page-size"},null,8,["modelValue"])]),r(oa,{modelValue:h.value,"onUpdate:modelValue":V[10]||(V[10]=W=>h.value=W),length:D.value,disabled:D.value<=1,color:"primary",variant:"tonal",density:"comfortable"},null,8,["modelValue","length","disabled"])]),_:1})):K("",!0)]),_:1}),r(Qe,{modelValue:y(f),"onUpdate:modelValue":V[13]||(V[13]=W=>ce(f)?f.value=W:null),"max-width":"480",persistent:""},{default:o(()=>[r(re,null,{default:o(()=>[r(xe,{class:"text-h6 font-weight-semibold"},{default:o(()=>[...V[23]||(V[23]=[_(" Export Questions ",-1)])]),_:1}),r(ue,null,{default:o(()=>[r(na,{modelValue:y(g),"onUpdate:modelValue":V[11]||(V[11]=W=>ce(g)?g.value=W:null),label:"Select export format",class:"mb-4"},{default:o(()=>[r(Ot,{label:"CSV (.csv)",value:"csv"}),r(Ot,{label:"QTI (IMS ZIP)",value:"qti"})]),_:1},8,["modelValue"]),r(_e,{modelValue:y(k),"onUpdate:modelValue":V[12]||(V[12]=W=>ce(k)?k.value=W:null),label:"File name",variant:"outlined","prepend-inner-icon":"mdi-file",density:"comfortable"},null,8,["modelValue"])]),_:1}),r(De,{class:"justify-end"},{default:o(()=>[r(q,{variant:"text",onClick:y(t).closeExportDialog},{default:o(()=>[...V[24]||(V[24]=[_(" Cancel ",-1)])]),_:1},8,["onClick"]),r(q,{color:"primary",variant:"flat",loading:y(x),disabled:!y(k),onClick:y(t).exportQuestions},{default:o(()=>[...V[25]||(V[25]=[_(" Export ",-1)])]),_:1},8,["loading","disabled","onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]))}}),Eo=he(Vo,[["__scopeId","data-v-f7357008"]]),$o={class:"login-page"},Do={class:"login-card__brand"},No=ge({__name:"LoginPage",setup(e){const t=wt(),s=_t(),a=pe(),i=Y(""),n=Y(""),l=N(()=>a.loading),d=N(()=>{var f;return((f=a.error)==null?void 0:f.message)||""}),c=async()=>{if(!l.value)try{await a.signIn({username:i.value,password:n.value});const f=typeof t.query.redirect=="string"?t.query.redirect:void 0;f?s.replace(f):s.replace({name:"Dashboard"})}catch{}};return(f,g)=>(v(),$("div",$o,[r(re,{class:"login-card",elevation:"8"},{default:o(()=>[m("div",Do,[r(be,{size:"56",color:"primary",variant:"flat"},{default:o(()=>[...g[2]||(g[2]=[m("span",{class:"text-h6 font-weight-bold text-white"},"EM",-1)])]),_:1}),g[3]||(g[3]=m("div",null,[m("p",{class:"login-card__eyebrow"},"EduMind Studio"),m("h1",{class:"login-card__title"},"Sign in to continue"),m("p",{class:"login-card__subtitle"},"Use the credentials shared with your team lead.")],-1))]),r(ss,{class:"login-card__form",onSubmit:$e(c,["prevent"])},{default:o(()=>[r(_e,{modelValue:i.value,"onUpdate:modelValue":g[0]||(g[0]=k=>i.value=k),label:"Username",variant:"outlined",density:"comfortable",autocomplete:"username",required:"",disabled:l.value},null,8,["modelValue","disabled"]),r(_e,{modelValue:n.value,"onUpdate:modelValue":g[1]||(g[1]=k=>n.value=k),label:"Password",variant:"outlined",density:"comfortable",type:"password",autocomplete:"current-password",required:"",disabled:l.value},null,8,["modelValue","disabled"]),d.value?(v(),z(Ae,{key:0,type:"error",variant:"tonal",density:"comfortable"},{default:o(()=>[_(M(d.value),1)]),_:1})):K("",!0),r(q,{color:"primary",variant:"flat",block:"",size:"large",type:"submit",loading:l.value,disabled:l.value},{default:o(()=>[...g[4]||(g[4]=[_(" Sign In ",-1)])]),_:1},8,["loading","disabled"])]),_:1})]),_:1})]))}}),Fo=he(No,[["__scopeId","data-v-a7419875"]]),Oo={__name:"GraphViewerPage",setup(e){return(t,s)=>(v(),z(Cs,{style:{height:"calc(100vh - 96px)"}}))}},Lo=[{path:"/",name:"Dashboard",component:Ur,meta:{requiresAuth:!0}},{path:"/studio",name:"Studio",component:wo,meta:{requiresAuth:!0}},{path:"/workspace",redirect:{name:"Studio"}},{path:"/questions",name:"Questions",component:Eo,meta:{requiresAuth:!0}},{path:"/visualizer",name:"Visualizer",component:Oo,meta:{requiresAuth:!0}},{path:"/login",name:"Login",component:Fo,meta:{requiresAuth:!1}},{path:"/:pathMatch(.*)*",redirect:{name:"Dashboard"}}],Is=Ls({history:Ms("/edumind_webui/"),routes:Lo});Is.beforeEach(async(e,t,s)=>{var i;const a=pe();return!a.hydrated&&!a.loading&&await a.hydrate(),((i=e.meta)==null?void 0:i.requiresAuth)===!1?a.isAuthenticated&&e.name==="Login"?s({name:"Dashboard"}):s():a.isAuthenticated?s():s({name:"Login",query:e.fullPath?{redirect:e.fullPath}:void 0})});const Oe="#166534",Mo={dark:!1,colors:{background:"#FFFFFF",surface:"#FFFFFF",primary:Oe,secondary:Oe,info:Oe,warning:Oe,error:Oe,success:Oe},variables:{"font-family":"Overpass, sans-serif","border-radius-root":"16px"}},Po=la({theme:{defaultTheme:"light",variations:{colors:["primary","secondary","accent"],lighten:2,darken:2},themes:{light:Mo}},icons:{defaultSet:"mdi",aliases:ca,sets:{mdi:da}},defaults:{global:{ripple:!1},VCard:{elevation:1,rounded:"xl"},VBtn:{rounded:"lg",style:"text-transform: none; letter-spacing: 0;"}}});function Uo(e){e.use(Po)}const ct=Ns(xr),Ts=Fs();Ts.use(Os);Uo(ct);ct.use(Ts);ct.use(Is);ct.mount("#app");
